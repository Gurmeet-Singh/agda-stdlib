<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Nat.Logarithm</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">-----------------------------------------------------------------------</a>
<a id="73" class="Comment">-- The Agda standard library</a>
<a id="102" class="Comment">--</a>
<a id="105" class="Comment">-- Logarithm base 2 and respective properties</a>
<a id="151" class="Comment">------------------------------------------------------------------------</a>

<a id="225" class="Symbol">{-#</a> <a id="229" class="Keyword">OPTIONS</a> <a id="237" class="Pragma">--cubical-compatible</a> <a id="258" class="Pragma">--safe</a> <a id="265" class="Symbol">#-}</a>

<a id="270" class="Keyword">module</a> <a id="277" href="Data.Nat.Logarithm.html" class="Module">Data.Nat.Logarithm</a> <a id="296" class="Keyword">where</a>

<a id="303" class="Keyword">open</a> <a id="308" class="Keyword">import</a> <a id="315" href="Data.Nat.html" class="Module">Data.Nat</a>
<a id="324" class="Keyword">open</a> <a id="329" class="Keyword">import</a> <a id="336" href="Data.Nat.Induction.html" class="Module">Data.Nat.Induction</a> <a id="355" class="Keyword">using</a> <a id="361" class="Symbol">(</a><a id="362" href="Data.Nat.Induction.html#2196" class="Function">&lt;-wellFounded</a><a id="375" class="Symbol">)</a>
<a id="377" class="Keyword">open</a> <a id="382" class="Keyword">import</a> <a id="389" href="Data.Nat.Logarithm.Core.html" class="Module">Data.Nat.Logarithm.Core</a>
<a id="413" class="Keyword">open</a> <a id="418" class="Keyword">import</a> <a id="425" href="Relation.Binary.PropositionalEquality.Core.html" class="Module">Relation.Binary.PropositionalEquality.Core</a> <a id="468" class="Keyword">using</a> <a id="474" class="Symbol">(</a><a id="475" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">_≡_</a><a id="478" class="Symbol">)</a>

<a id="481" class="Comment">------------------------------------------------------------------------</a>
<a id="554" class="Comment">-- Logarithm base 2</a>

<a id="575" class="Comment">-- Floor version</a>

<a id="⌊log₂_⌋"></a><a id="593" href="Data.Nat.Logarithm.html#593" class="Function Operator">⌊log₂_⌋</a> <a id="601" class="Symbol">:</a> <a id="603" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="605" class="Symbol">→</a> <a id="607" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="609" href="Data.Nat.Logarithm.html#593" class="Function Operator">⌊log₂</a> <a id="615" href="Data.Nat.Logarithm.html#615" class="Bound">n</a> <a id="617" href="Data.Nat.Logarithm.html#593" class="Function Operator">⌋</a> <a id="619" class="Symbol">=</a> <a id="621" href="Data.Nat.Logarithm.Core.html#661" class="Function">⌊log2⌋</a> <a id="628" href="Data.Nat.Logarithm.html#615" class="Bound">n</a> <a id="630" class="Symbol">(</a><a id="631" href="Data.Nat.Induction.html#2196" class="Function">&lt;-wellFounded</a> <a id="645" href="Data.Nat.Logarithm.html#615" class="Bound">n</a><a id="646" class="Symbol">)</a>

<a id="649" class="Comment">-- Ceil version</a>

<a id="⌈log₂_⌉"></a><a id="666" href="Data.Nat.Logarithm.html#666" class="Function Operator">⌈log₂_⌉</a> <a id="674" class="Symbol">:</a> <a id="676" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="678" class="Symbol">→</a> <a id="680" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a>
<a id="682" href="Data.Nat.Logarithm.html#666" class="Function Operator">⌈log₂</a> <a id="688" href="Data.Nat.Logarithm.html#688" class="Bound">n</a> <a id="690" href="Data.Nat.Logarithm.html#666" class="Function Operator">⌉</a> <a id="692" class="Symbol">=</a> <a id="694" href="Data.Nat.Logarithm.Core.html#851" class="Function">⌈log2⌉</a> <a id="701" href="Data.Nat.Logarithm.html#688" class="Bound">n</a> <a id="703" class="Symbol">(</a><a id="704" href="Data.Nat.Induction.html#2196" class="Function">&lt;-wellFounded</a> <a id="718" href="Data.Nat.Logarithm.html#688" class="Bound">n</a><a id="719" class="Symbol">)</a>

<a id="722" class="Comment">------------------------------------------------------------------------</a>
<a id="795" class="Comment">-- Properties of ⌊log₂_⌋</a>

<a id="⌊log₂⌋-mono-≤"></a><a id="821" href="Data.Nat.Logarithm.html#821" class="Function">⌊log₂⌋-mono-≤</a> <a id="835" class="Symbol">:</a> <a id="837" class="Symbol">∀</a> <a id="839" class="Symbol">{</a><a id="840" href="Data.Nat.Logarithm.html#840" class="Bound">m</a> <a id="842" href="Data.Nat.Logarithm.html#842" class="Bound">n</a><a id="843" class="Symbol">}</a> <a id="845" class="Symbol">→</a> <a id="847" href="Data.Nat.Logarithm.html#840" class="Bound">m</a> <a id="849" href="Data.Nat.Base.html#1544" class="Datatype Operator">≤</a> <a id="851" href="Data.Nat.Logarithm.html#842" class="Bound">n</a> <a id="853" class="Symbol">→</a> <a id="855" href="Data.Nat.Logarithm.html#593" class="Function Operator">⌊log₂</a> <a id="861" href="Data.Nat.Logarithm.html#840" class="Bound">m</a> <a id="863" href="Data.Nat.Logarithm.html#593" class="Function Operator">⌋</a> <a id="865" href="Data.Nat.Base.html#1544" class="Datatype Operator">≤</a> <a id="867" href="Data.Nat.Logarithm.html#593" class="Function Operator">⌊log₂</a> <a id="873" href="Data.Nat.Logarithm.html#842" class="Bound">n</a> <a id="875" href="Data.Nat.Logarithm.html#593" class="Function Operator">⌋</a>
<a id="877" href="Data.Nat.Logarithm.html#821" class="Function">⌊log₂⌋-mono-≤</a> <a id="891" href="Data.Nat.Logarithm.html#891" class="Bound">p</a> <a id="893" class="Symbol">=</a> <a id="895" href="Data.Nat.Logarithm.Core.html#1590" class="Function">⌊log2⌋-mono-≤</a> <a id="909" href="Data.Nat.Logarithm.html#891" class="Bound">p</a>

<a id="⌊log₂⌊n/2⌋⌋≡⌊log₂n⌋∸1"></a><a id="912" href="Data.Nat.Logarithm.html#912" class="Function">⌊log₂⌊n/2⌋⌋≡⌊log₂n⌋∸1</a> <a id="934" class="Symbol">:</a> <a id="936" class="Symbol">∀</a> <a id="938" href="Data.Nat.Logarithm.html#938" class="Bound">n</a> <a id="940" class="Symbol">→</a> <a id="942" href="Data.Nat.Logarithm.html#593" class="Function Operator">⌊log₂</a> <a id="948" href="Data.Nat.Base.html#4372" class="Function Operator">⌊</a> <a id="950" href="Data.Nat.Logarithm.html#938" class="Bound">n</a> <a id="952" href="Data.Nat.Base.html#4372" class="Function Operator">/2⌋</a> <a id="956" href="Data.Nat.Logarithm.html#593" class="Function Operator">⌋</a> <a id="958" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="960" href="Data.Nat.Logarithm.html#593" class="Function Operator">⌊log₂</a> <a id="966" href="Data.Nat.Logarithm.html#938" class="Bound">n</a> <a id="968" href="Data.Nat.Logarithm.html#593" class="Function Operator">⌋</a> <a id="970" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="972" class="Number">1</a>
<a id="974" href="Data.Nat.Logarithm.html#912" class="Function">⌊log₂⌊n/2⌋⌋≡⌊log₂n⌋∸1</a> <a id="996" href="Data.Nat.Logarithm.html#996" class="Bound">n</a> <a id="998" class="Symbol">=</a> <a id="1000" href="Data.Nat.Logarithm.Core.html#1872" class="Function">⌊log2⌋⌊n/2⌋≡⌊log2⌋n∸1</a> <a id="1022" href="Data.Nat.Logarithm.html#996" class="Bound">n</a>

<a id="⌊log₂[2*b]⌋≡1+⌊log₂b⌋"></a><a id="1025" href="Data.Nat.Logarithm.html#1025" class="Function">⌊log₂[2*b]⌋≡1+⌊log₂b⌋</a> <a id="1047" class="Symbol">:</a> <a id="1049" class="Symbol">∀</a> <a id="1051" href="Data.Nat.Logarithm.html#1051" class="Bound">n</a> <a id="1053" class="Symbol">.{{</a><a id="1056" href="Data.Nat.Logarithm.html#1056" class="Bound">_</a> <a id="1058" class="Symbol">:</a> <a id="1060" href="Data.Nat.Base.html#2570" class="Record">NonZero</a> <a id="1068" href="Data.Nat.Logarithm.html#1051" class="Bound">n</a><a id="1069" class="Symbol">}}</a> <a id="1072" class="Symbol">→</a> <a id="1074" href="Data.Nat.Logarithm.html#593" class="Function Operator">⌊log₂</a> <a id="1080" class="Symbol">(</a><a id="1081" class="Number">2</a> <a id="1083" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">*</a> <a id="1085" href="Data.Nat.Logarithm.html#1051" class="Bound">n</a><a id="1086" class="Symbol">)</a> <a id="1088" href="Data.Nat.Logarithm.html#593" class="Function Operator">⌋</a> <a id="1090" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1092" class="Number">1</a> <a id="1094" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="1096" href="Data.Nat.Logarithm.html#593" class="Function Operator">⌊log₂</a> <a id="1102" href="Data.Nat.Logarithm.html#1051" class="Bound">n</a> <a id="1104" href="Data.Nat.Logarithm.html#593" class="Function Operator">⌋</a>
<a id="1106" href="Data.Nat.Logarithm.html#1025" class="Function">⌊log₂[2*b]⌋≡1+⌊log₂b⌋</a> <a id="1128" href="Data.Nat.Logarithm.html#1128" class="Bound">n</a> <a id="1130" class="Symbol">=</a> <a id="1132" href="Data.Nat.Logarithm.Core.html#2198" class="Function">⌊log2⌋2*b≡1+⌊log2⌋b</a> <a id="1152" href="Data.Nat.Logarithm.html#1128" class="Bound">n</a>

<a id="⌊log₂[2^n]⌋≡n"></a><a id="1155" href="Data.Nat.Logarithm.html#1155" class="Function">⌊log₂[2^n]⌋≡n</a> <a id="1169" class="Symbol">:</a> <a id="1171" class="Symbol">∀</a> <a id="1173" href="Data.Nat.Logarithm.html#1173" class="Bound">n</a> <a id="1175" class="Symbol">→</a> <a id="1177" href="Data.Nat.Logarithm.html#593" class="Function Operator">⌊log₂</a> <a id="1183" class="Symbol">(</a><a id="1184" class="Number">2</a> <a id="1186" href="Data.Nat.Base.html#4575" class="Function Operator">^</a> <a id="1188" href="Data.Nat.Logarithm.html#1173" class="Bound">n</a><a id="1189" class="Symbol">)</a> <a id="1191" href="Data.Nat.Logarithm.html#593" class="Function Operator">⌋</a> <a id="1193" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1195" href="Data.Nat.Logarithm.html#1173" class="Bound">n</a>
<a id="1197" href="Data.Nat.Logarithm.html#1155" class="Function">⌊log₂[2^n]⌋≡n</a> <a id="1211" href="Data.Nat.Logarithm.html#1211" class="Bound">n</a> <a id="1213" class="Symbol">=</a> <a id="1215" href="Data.Nat.Logarithm.Core.html#2903" class="Function">⌊log2⌋2^n≡n</a> <a id="1227" href="Data.Nat.Logarithm.html#1211" class="Bound">n</a>

<a id="1230" class="Comment">------------------------------------------------------------------------</a>
<a id="1303" class="Comment">-- Properties of ⌈log₂_⌉</a>

<a id="⌈log₂⌉-mono-≤"></a><a id="1329" href="Data.Nat.Logarithm.html#1329" class="Function">⌈log₂⌉-mono-≤</a> <a id="1343" class="Symbol">:</a> <a id="1345" class="Symbol">∀</a> <a id="1347" class="Symbol">{</a><a id="1348" href="Data.Nat.Logarithm.html#1348" class="Bound">m</a> <a id="1350" href="Data.Nat.Logarithm.html#1350" class="Bound">n</a><a id="1351" class="Symbol">}</a> <a id="1353" class="Symbol">→</a> <a id="1355" href="Data.Nat.Logarithm.html#1348" class="Bound">m</a> <a id="1357" href="Data.Nat.Base.html#1544" class="Datatype Operator">≤</a> <a id="1359" href="Data.Nat.Logarithm.html#1350" class="Bound">n</a> <a id="1361" class="Symbol">→</a> <a id="1363" href="Data.Nat.Logarithm.html#666" class="Function Operator">⌈log₂</a> <a id="1369" href="Data.Nat.Logarithm.html#1348" class="Bound">m</a> <a id="1371" href="Data.Nat.Logarithm.html#666" class="Function Operator">⌉</a> <a id="1373" href="Data.Nat.Base.html#1544" class="Datatype Operator">≤</a> <a id="1375" href="Data.Nat.Logarithm.html#666" class="Function Operator">⌈log₂</a> <a id="1381" href="Data.Nat.Logarithm.html#1350" class="Bound">n</a> <a id="1383" href="Data.Nat.Logarithm.html#666" class="Function Operator">⌉</a>
<a id="1385" href="Data.Nat.Logarithm.html#1329" class="Function">⌈log₂⌉-mono-≤</a> <a id="1399" href="Data.Nat.Logarithm.html#1399" class="Bound">p</a> <a id="1401" class="Symbol">=</a> <a id="1403" href="Data.Nat.Logarithm.Core.html#3799" class="Function">⌈log2⌉-mono-≤</a> <a id="1417" href="Data.Nat.Logarithm.html#1399" class="Bound">p</a>

<a id="⌈log₂⌈n/2⌉⌉≡⌈log₂n⌉∸1"></a><a id="1420" href="Data.Nat.Logarithm.html#1420" class="Function">⌈log₂⌈n/2⌉⌉≡⌈log₂n⌉∸1</a> <a id="1442" class="Symbol">:</a> <a id="1444" class="Symbol">∀</a> <a id="1446" href="Data.Nat.Logarithm.html#1446" class="Bound">n</a> <a id="1448" class="Symbol">→</a> <a id="1450" href="Data.Nat.Logarithm.html#666" class="Function Operator">⌈log₂</a> <a id="1456" href="Data.Nat.Base.html#4499" class="Function Operator">⌈</a> <a id="1458" href="Data.Nat.Logarithm.html#1446" class="Bound">n</a> <a id="1460" href="Data.Nat.Base.html#4499" class="Function Operator">/2⌉</a> <a id="1464" href="Data.Nat.Logarithm.html#666" class="Function Operator">⌉</a> <a id="1466" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1468" href="Data.Nat.Logarithm.html#666" class="Function Operator">⌈log₂</a> <a id="1474" href="Data.Nat.Logarithm.html#1446" class="Bound">n</a> <a id="1476" href="Data.Nat.Logarithm.html#666" class="Function Operator">⌉</a> <a id="1478" href="Data.Nat.Base.html#3211" class="Primitive Operator">∸</a> <a id="1480" class="Number">1</a>
<a id="1482" href="Data.Nat.Logarithm.html#1420" class="Function">⌈log₂⌈n/2⌉⌉≡⌈log₂n⌉∸1</a> <a id="1504" href="Data.Nat.Logarithm.html#1504" class="Bound">n</a> <a id="1506" class="Symbol">=</a> <a id="1508" href="Data.Nat.Logarithm.Core.html#4098" class="Function">⌈log2⌉⌈n/2⌉≡⌈log2⌉n∸1</a> <a id="1530" href="Data.Nat.Logarithm.html#1504" class="Bound">n</a>

<a id="⌈log₂2*n⌉≡1+⌈log₂n⌉"></a><a id="1533" href="Data.Nat.Logarithm.html#1533" class="Function">⌈log₂2*n⌉≡1+⌈log₂n⌉</a> <a id="1553" class="Symbol">:</a> <a id="1555" class="Symbol">∀</a> <a id="1557" href="Data.Nat.Logarithm.html#1557" class="Bound">n</a> <a id="1559" class="Symbol">.{{</a><a id="1562" href="Data.Nat.Logarithm.html#1562" class="Bound">_</a> <a id="1564" class="Symbol">:</a> <a id="1566" href="Data.Nat.Base.html#2570" class="Record">NonZero</a> <a id="1574" href="Data.Nat.Logarithm.html#1557" class="Bound">n</a><a id="1575" class="Symbol">}}</a> <a id="1578" class="Symbol">→</a> <a id="1580" href="Data.Nat.Logarithm.html#666" class="Function Operator">⌈log₂</a> <a id="1586" class="Symbol">(</a><a id="1587" class="Number">2</a> <a id="1589" href="Agda.Builtin.Nat.html#522" class="Primitive Operator">*</a> <a id="1591" href="Data.Nat.Logarithm.html#1557" class="Bound">n</a><a id="1592" class="Symbol">)</a> <a id="1594" href="Data.Nat.Logarithm.html#666" class="Function Operator">⌉</a> <a id="1596" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1598" class="Number">1</a> <a id="1600" href="Agda.Builtin.Nat.html#319" class="Primitive Operator">+</a> <a id="1602" href="Data.Nat.Logarithm.html#666" class="Function Operator">⌈log₂</a> <a id="1608" href="Data.Nat.Logarithm.html#1557" class="Bound">n</a> <a id="1610" href="Data.Nat.Logarithm.html#666" class="Function Operator">⌉</a>
<a id="1612" href="Data.Nat.Logarithm.html#1533" class="Function">⌈log₂2*n⌉≡1+⌈log₂n⌉</a> <a id="1632" href="Data.Nat.Logarithm.html#1632" class="Bound">n</a> <a id="1634" class="Symbol">=</a> <a id="1636" href="Data.Nat.Logarithm.Core.html#4428" class="Function">⌈log2⌉2*n≡1+⌈log2⌉n</a> <a id="1656" href="Data.Nat.Logarithm.html#1632" class="Bound">n</a>

<a id="⌈log₂2^n⌉≡n"></a><a id="1659" href="Data.Nat.Logarithm.html#1659" class="Function">⌈log₂2^n⌉≡n</a> <a id="1671" class="Symbol">:</a> <a id="1673" class="Symbol">∀</a> <a id="1675" href="Data.Nat.Logarithm.html#1675" class="Bound">n</a> <a id="1677" class="Symbol">→</a> <a id="1679" href="Data.Nat.Logarithm.html#666" class="Function Operator">⌈log₂</a> <a id="1685" class="Symbol">(</a><a id="1686" class="Number">2</a> <a id="1688" href="Data.Nat.Base.html#4575" class="Function Operator">^</a> <a id="1690" href="Data.Nat.Logarithm.html#1675" class="Bound">n</a><a id="1691" class="Symbol">)</a> <a id="1693" href="Data.Nat.Logarithm.html#666" class="Function Operator">⌉</a> <a id="1695" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1697" href="Data.Nat.Logarithm.html#1675" class="Bound">n</a>
<a id="1699" href="Data.Nat.Logarithm.html#1659" class="Function">⌈log₂2^n⌉≡n</a> <a id="1711" href="Data.Nat.Logarithm.html#1711" class="Bound">n</a> <a id="1713" class="Symbol">=</a> <a id="1715" href="Data.Nat.Logarithm.Core.html#5132" class="Function">⌈log2⌉2^n≡n</a> <a id="1727" href="Data.Nat.Logarithm.html#1711" class="Bound">n</a>
</pre></body></html>