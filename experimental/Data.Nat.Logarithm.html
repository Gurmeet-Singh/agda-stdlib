<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Nat.Logarithm</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">-----------------------------------------------------------------------</a>
<a id="73" class="Comment">-- The Agda standard library</a>
<a id="102" class="Comment">--</a>
<a id="105" class="Comment">-- Logarithm base 2 and respective properties</a>
<a id="151" class="Comment">------------------------------------------------------------------------</a>

<a id="225" class="Symbol">{-#</a> <a id="229" class="Keyword">OPTIONS</a> <a id="237" class="Pragma">--without-K</a> <a id="249" class="Pragma">--safe</a> <a id="256" class="Symbol">#-}</a>

<a id="261" class="Keyword">module</a> <a id="268" href="Data.Nat.Logarithm.html" class="Module">Data.Nat.Logarithm</a> <a id="287" class="Keyword">where</a>

<a id="294" class="Keyword">open</a> <a id="299" class="Keyword">import</a> <a id="306" href="Data.Nat.html" class="Module">Data.Nat</a>
<a id="315" class="Keyword">open</a> <a id="320" class="Keyword">import</a> <a id="327" href="Data.Nat.Induction.html" class="Module">Data.Nat.Induction</a> <a id="346" class="Keyword">using</a> <a id="352" class="Symbol">(</a><a id="353" href="Data.Nat.Induction.html#2191" class="Function">&lt;-wellFounded</a><a id="366" class="Symbol">)</a>
<a id="368" class="Keyword">open</a> <a id="373" class="Keyword">import</a> <a id="380" href="Data.Nat.Logarithm.Core.html" class="Module">Data.Nat.Logarithm.Core</a>
<a id="404" class="Keyword">open</a> <a id="409" class="Keyword">import</a> <a id="416" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="454" class="Keyword">using</a> <a id="460" class="Symbol">(</a><a id="461" href="Agda.Builtin.Equality.html#124" class="Datatype Operator">_≡_</a><a id="464" class="Symbol">)</a>

<a id="467" class="Comment">------------------------------------------------------------------------</a>
<a id="540" class="Comment">-- Logarithm base 2</a>

<a id="561" class="Comment">-- Floor version</a>

<a id="⌊log₂_⌋"></a><a id="579" href="Data.Nat.Logarithm.html#579" class="Function Operator">⌊log₂_⌋</a> <a id="587" class="Symbol">:</a> <a id="589" href="Agda.Builtin.Nat.html#177" class="Datatype">ℕ</a> <a id="591" class="Symbol">→</a> <a id="593" href="Agda.Builtin.Nat.html#177" class="Datatype">ℕ</a>
<a id="595" href="Data.Nat.Logarithm.html#579" class="Function Operator">⌊log₂</a> <a id="601" href="Data.Nat.Logarithm.html#601" class="Bound">n</a> <a id="603" href="Data.Nat.Logarithm.html#579" class="Function Operator">⌋</a> <a id="605" class="Symbol">=</a> <a id="607" href="Data.Nat.Logarithm.Core.html#652" class="Function">⌊log2⌋</a> <a id="614" href="Data.Nat.Logarithm.html#601" class="Bound">n</a> <a id="616" class="Symbol">(</a><a id="617" href="Data.Nat.Induction.html#2191" class="Function">&lt;-wellFounded</a> <a id="631" href="Data.Nat.Logarithm.html#601" class="Bound">n</a><a id="632" class="Symbol">)</a>

<a id="635" class="Comment">-- Ceil version</a>

<a id="⌈log₂_⌉"></a><a id="652" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌈log₂_⌉</a> <a id="660" class="Symbol">:</a> <a id="662" href="Agda.Builtin.Nat.html#177" class="Datatype">ℕ</a> <a id="664" class="Symbol">→</a> <a id="666" href="Agda.Builtin.Nat.html#177" class="Datatype">ℕ</a>
<a id="668" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌈log₂</a> <a id="674" href="Data.Nat.Logarithm.html#674" class="Bound">n</a> <a id="676" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌉</a> <a id="678" class="Symbol">=</a> <a id="680" href="Data.Nat.Logarithm.Core.html#829" class="Function">⌈log2⌉</a> <a id="687" href="Data.Nat.Logarithm.html#674" class="Bound">n</a> <a id="689" class="Symbol">(</a><a id="690" href="Data.Nat.Induction.html#2191" class="Function">&lt;-wellFounded</a> <a id="704" href="Data.Nat.Logarithm.html#674" class="Bound">n</a><a id="705" class="Symbol">)</a>

<a id="708" class="Comment">------------------------------------------------------------------------</a>
<a id="781" class="Comment">-- Properties of ⌊log₂_⌋</a>

<a id="⌊log₂⌊n/2⌋⌋≡⌊log₂n⌋∸1"></a><a id="807" href="Data.Nat.Logarithm.html#807" class="Function">⌊log₂⌊n/2⌋⌋≡⌊log₂n⌋∸1</a> <a id="829" class="Symbol">:</a> <a id="831" class="Symbol">∀</a> <a id="833" href="Data.Nat.Logarithm.html#833" class="Bound">n</a> <a id="835" class="Symbol">→</a> <a id="837" href="Data.Nat.Logarithm.html#579" class="Function Operator">⌊log₂</a> <a id="843" href="Data.Nat.Base.html#3622" class="Function Operator">⌊</a> <a id="845" href="Data.Nat.Logarithm.html#833" class="Bound">n</a> <a id="847" href="Data.Nat.Base.html#3622" class="Function Operator">/2⌋</a> <a id="851" href="Data.Nat.Logarithm.html#579" class="Function Operator">⌋</a> <a id="853" href="Agda.Builtin.Equality.html#124" class="Datatype Operator">≡</a> <a id="855" href="Data.Nat.Logarithm.html#579" class="Function Operator">⌊log₂</a> <a id="861" href="Data.Nat.Logarithm.html#833" class="Bound">n</a> <a id="863" href="Data.Nat.Logarithm.html#579" class="Function Operator">⌋</a> <a id="865" href="Data.Nat.Base.html#3131" class="Primitive Operator">∸</a> <a id="867" class="Number">1</a>
<a id="869" href="Data.Nat.Logarithm.html#807" class="Function">⌊log₂⌊n/2⌋⌋≡⌊log₂n⌋∸1</a> <a id="891" href="Data.Nat.Logarithm.html#891" class="Bound">n</a> <a id="893" class="Symbol">=</a> <a id="895" href="Data.Nat.Logarithm.Core.html#1850" class="Function">⌊log2⌋⌊n/2⌋≡⌊log2⌋n∸1</a> <a id="917" href="Data.Nat.Logarithm.html#891" class="Bound">n</a>

<a id="⌊log₂[2*b]⌋≡1+⌊log₂b⌋"></a><a id="920" href="Data.Nat.Logarithm.html#920" class="Function">⌊log₂[2*b]⌋≡1+⌊log₂b⌋</a> <a id="942" class="Symbol">:</a> <a id="944" class="Symbol">∀</a> <a id="946" href="Data.Nat.Logarithm.html#946" class="Bound">n</a> <a id="948" class="Symbol">.{{</a><a id="951" href="Data.Nat.Logarithm.html#951" class="Bound">_</a> <a id="953" class="Symbol">:</a> <a id="955" href="Data.Nat.Base.html#2490" class="Record">NonZero</a> <a id="963" href="Data.Nat.Logarithm.html#946" class="Bound">n</a><a id="964" class="Symbol">}}</a> <a id="967" class="Symbol">→</a> <a id="969" href="Data.Nat.Logarithm.html#579" class="Function Operator">⌊log₂</a> <a id="975" class="Symbol">(</a><a id="976" class="Number">2</a> <a id="978" href="Agda.Builtin.Nat.html#513" class="Primitive Operator">*</a> <a id="980" href="Data.Nat.Logarithm.html#946" class="Bound">n</a><a id="981" class="Symbol">)</a> <a id="983" href="Data.Nat.Logarithm.html#579" class="Function Operator">⌋</a> <a id="985" href="Agda.Builtin.Equality.html#124" class="Datatype Operator">≡</a> <a id="987" class="Number">1</a> <a id="989" href="Agda.Builtin.Nat.html#310" class="Primitive Operator">+</a> <a id="991" href="Data.Nat.Logarithm.html#579" class="Function Operator">⌊log₂</a> <a id="997" href="Data.Nat.Logarithm.html#946" class="Bound">n</a> <a id="999" href="Data.Nat.Logarithm.html#579" class="Function Operator">⌋</a>
<a id="1001" href="Data.Nat.Logarithm.html#920" class="Function">⌊log₂[2*b]⌋≡1+⌊log₂b⌋</a> <a id="1023" href="Data.Nat.Logarithm.html#1023" class="Bound">n</a> <a id="1025" class="Symbol">=</a> <a id="1027" href="Data.Nat.Logarithm.Core.html#2176" class="Function">⌊log2⌋2*b≡1+⌊log2⌋b</a> <a id="1047" href="Data.Nat.Logarithm.html#1023" class="Bound">n</a>

<a id="⌊log₂[2^n]⌋≡n"></a><a id="1050" href="Data.Nat.Logarithm.html#1050" class="Function">⌊log₂[2^n]⌋≡n</a> <a id="1064" class="Symbol">:</a> <a id="1066" class="Symbol">∀</a> <a id="1068" href="Data.Nat.Logarithm.html#1068" class="Bound">n</a> <a id="1070" class="Symbol">→</a> <a id="1072" href="Data.Nat.Logarithm.html#579" class="Function Operator">⌊log₂</a> <a id="1078" class="Symbol">(</a><a id="1079" class="Number">2</a> <a id="1081" href="Data.Nat.Base.html#3811" class="Function Operator">^</a> <a id="1083" href="Data.Nat.Logarithm.html#1068" class="Bound">n</a><a id="1084" class="Symbol">)</a> <a id="1086" href="Data.Nat.Logarithm.html#579" class="Function Operator">⌋</a> <a id="1088" href="Agda.Builtin.Equality.html#124" class="Datatype Operator">≡</a> <a id="1090" href="Data.Nat.Logarithm.html#1068" class="Bound">n</a>
<a id="1092" href="Data.Nat.Logarithm.html#1050" class="Function">⌊log₂[2^n]⌋≡n</a> <a id="1106" href="Data.Nat.Logarithm.html#1106" class="Bound">n</a> <a id="1108" class="Symbol">=</a> <a id="1110" href="Data.Nat.Logarithm.Core.html#2881" class="Function">⌊log2⌋2^n≡n</a> <a id="1122" href="Data.Nat.Logarithm.html#1106" class="Bound">n</a>

<a id="1125" class="Comment">------------------------------------------------------------------------</a>
<a id="1198" class="Comment">-- Properties of ⌈log₂_⌉</a>

<a id="⌈log₂⌉-mono-≤"></a><a id="1224" href="Data.Nat.Logarithm.html#1224" class="Function">⌈log₂⌉-mono-≤</a> <a id="1238" class="Symbol">:</a> <a id="1240" class="Symbol">∀</a> <a id="1242" class="Symbol">{</a><a id="1243" href="Data.Nat.Logarithm.html#1243" class="Bound">m</a> <a id="1245" href="Data.Nat.Logarithm.html#1245" class="Bound">n</a><a id="1246" class="Symbol">}</a> <a id="1248" class="Symbol">→</a> <a id="1250" href="Data.Nat.Logarithm.html#1243" class="Bound">m</a> <a id="1252" href="Data.Nat.Base.html#1464" class="Datatype Operator">≤</a> <a id="1254" href="Data.Nat.Logarithm.html#1245" class="Bound">n</a> <a id="1256" class="Symbol">→</a> <a id="1258" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌈log₂</a> <a id="1264" href="Data.Nat.Logarithm.html#1243" class="Bound">m</a> <a id="1266" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌉</a> <a id="1268" href="Data.Nat.Base.html#1464" class="Datatype Operator">≤</a> <a id="1270" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌈log₂</a> <a id="1276" href="Data.Nat.Logarithm.html#1245" class="Bound">n</a> <a id="1278" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌉</a>
<a id="1280" href="Data.Nat.Logarithm.html#1224" class="Function">⌈log₂⌉-mono-≤</a> <a id="1294" href="Data.Nat.Logarithm.html#1294" class="Bound">p</a> <a id="1296" class="Symbol">=</a> <a id="1298" href="Data.Nat.Logarithm.Core.html#3787" class="Function">⌈log2⌉-mono-≤</a> <a id="1312" href="Data.Nat.Logarithm.html#1294" class="Bound">p</a>

<a id="⌈log₂⌈n/2⌉⌉≡⌈log₂n⌉∸1"></a><a id="1315" href="Data.Nat.Logarithm.html#1315" class="Function">⌈log₂⌈n/2⌉⌉≡⌈log₂n⌉∸1</a> <a id="1337" class="Symbol">:</a> <a id="1339" class="Symbol">∀</a> <a id="1341" href="Data.Nat.Logarithm.html#1341" class="Bound">n</a> <a id="1343" class="Symbol">→</a> <a id="1345" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌈log₂</a> <a id="1351" href="Data.Nat.Base.html#3749" class="Function Operator">⌈</a> <a id="1353" href="Data.Nat.Logarithm.html#1341" class="Bound">n</a> <a id="1355" href="Data.Nat.Base.html#3749" class="Function Operator">/2⌉</a> <a id="1359" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌉</a> <a id="1361" href="Agda.Builtin.Equality.html#124" class="Datatype Operator">≡</a> <a id="1363" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌈log₂</a> <a id="1369" href="Data.Nat.Logarithm.html#1341" class="Bound">n</a> <a id="1371" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌉</a> <a id="1373" href="Data.Nat.Base.html#3131" class="Primitive Operator">∸</a> <a id="1375" class="Number">1</a>
<a id="1377" href="Data.Nat.Logarithm.html#1315" class="Function">⌈log₂⌈n/2⌉⌉≡⌈log₂n⌉∸1</a> <a id="1399" href="Data.Nat.Logarithm.html#1399" class="Bound">n</a> <a id="1401" class="Symbol">=</a> <a id="1403" href="Data.Nat.Logarithm.Core.html#4086" class="Function">⌈log2⌉⌈n/2⌉≡⌈log2⌉n∸1</a> <a id="1425" href="Data.Nat.Logarithm.html#1399" class="Bound">n</a>

<a id="⌈log₂2*n⌉≡1+⌈log₂n⌉"></a><a id="1428" href="Data.Nat.Logarithm.html#1428" class="Function">⌈log₂2*n⌉≡1+⌈log₂n⌉</a> <a id="1448" class="Symbol">:</a> <a id="1450" class="Symbol">∀</a> <a id="1452" href="Data.Nat.Logarithm.html#1452" class="Bound">n</a> <a id="1454" class="Symbol">.{{</a><a id="1457" href="Data.Nat.Logarithm.html#1457" class="Bound">_</a> <a id="1459" class="Symbol">:</a> <a id="1461" href="Data.Nat.Base.html#2490" class="Record">NonZero</a> <a id="1469" href="Data.Nat.Logarithm.html#1452" class="Bound">n</a><a id="1470" class="Symbol">}}</a> <a id="1473" class="Symbol">→</a> <a id="1475" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌈log₂</a> <a id="1481" class="Symbol">(</a><a id="1482" class="Number">2</a> <a id="1484" href="Agda.Builtin.Nat.html#513" class="Primitive Operator">*</a> <a id="1486" href="Data.Nat.Logarithm.html#1452" class="Bound">n</a><a id="1487" class="Symbol">)</a> <a id="1489" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌉</a> <a id="1491" href="Agda.Builtin.Equality.html#124" class="Datatype Operator">≡</a> <a id="1493" class="Number">1</a> <a id="1495" href="Agda.Builtin.Nat.html#310" class="Primitive Operator">+</a> <a id="1497" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌈log₂</a> <a id="1503" href="Data.Nat.Logarithm.html#1452" class="Bound">n</a> <a id="1505" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌉</a>
<a id="1507" href="Data.Nat.Logarithm.html#1428" class="Function">⌈log₂2*n⌉≡1+⌈log₂n⌉</a> <a id="1527" href="Data.Nat.Logarithm.html#1527" class="Bound">n</a> <a id="1529" class="Symbol">=</a> <a id="1531" href="Data.Nat.Logarithm.Core.html#4416" class="Function">⌈log2⌉2*n≡1+⌈log2⌉n</a> <a id="1551" href="Data.Nat.Logarithm.html#1527" class="Bound">n</a>

<a id="⌈log₂2^n⌉≡n"></a><a id="1554" href="Data.Nat.Logarithm.html#1554" class="Function">⌈log₂2^n⌉≡n</a> <a id="1566" class="Symbol">:</a> <a id="1568" class="Symbol">∀</a> <a id="1570" href="Data.Nat.Logarithm.html#1570" class="Bound">n</a> <a id="1572" class="Symbol">→</a> <a id="1574" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌈log₂</a> <a id="1580" class="Symbol">(</a><a id="1581" class="Number">2</a> <a id="1583" href="Data.Nat.Base.html#3811" class="Function Operator">^</a> <a id="1585" href="Data.Nat.Logarithm.html#1570" class="Bound">n</a><a id="1586" class="Symbol">)</a> <a id="1588" href="Data.Nat.Logarithm.html#652" class="Function Operator">⌉</a> <a id="1590" href="Agda.Builtin.Equality.html#124" class="Datatype Operator">≡</a> <a id="1592" href="Data.Nat.Logarithm.html#1570" class="Bound">n</a>
<a id="1594" href="Data.Nat.Logarithm.html#1554" class="Function">⌈log₂2^n⌉≡n</a> <a id="1606" href="Data.Nat.Logarithm.html#1606" class="Bound">n</a> <a id="1608" class="Symbol">=</a> <a id="1610" href="Data.Nat.Logarithm.Core.html#5120" class="Function">⌈log2⌉2^n≡n</a> <a id="1622" href="Data.Nat.Logarithm.html#1606" class="Bound">n</a>
</pre></body></html>