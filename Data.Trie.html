<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Trie</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Trie, basic type and operations</a>
<a id="141" class="Comment">------------------------------------------------------------------------</a>

<a id="215" class="Comment">-- See README.Data.Trie.NonDependent for an example of using a trie to</a>
<a id="286" class="Comment">-- build a lexer.</a>

<a id="305" class="Symbol">{-#</a> <a id="309" class="Keyword">OPTIONS</a> <a id="317" class="Pragma">--cubical-compatible</a> <a id="338" class="Pragma">--sized-types</a> <a id="352" class="Symbol">#-}</a>

<a id="357" class="Keyword">open</a> <a id="362" class="Keyword">import</a> <a id="369" href="Relation.Binary.html" class="Module">Relation.Binary</a> <a id="385" class="Keyword">using</a> <a id="391" class="Symbol">(</a><a id="392" href="Relation.Binary.Core.html#896" class="Function">Rel</a><a id="395" class="Symbol">;</a> <a id="397" href="Relation.Binary.Bundles.html#6960" class="Record">StrictTotalOrder</a><a id="413" class="Symbol">)</a>

<a id="416" class="Keyword">module</a> <a id="423" href="Data.Trie.html" class="Module">Data.Trie</a> <a id="433" class="Symbol">{</a><a id="434" href="Data.Trie.html#434" class="Bound">k</a> <a id="436" href="Data.Trie.html#436" class="Bound">e</a> <a id="438" href="Data.Trie.html#438" class="Bound">r</a><a id="439" class="Symbol">}</a> <a id="441" class="Symbol">(</a><a id="442" href="Data.Trie.html#442" class="Bound">S</a> <a id="444" class="Symbol">:</a> <a id="446" href="Relation.Binary.Bundles.html#6960" class="Record">StrictTotalOrder</a> <a id="463" href="Data.Trie.html#434" class="Bound">k</a> <a id="465" href="Data.Trie.html#436" class="Bound">e</a> <a id="467" href="Data.Trie.html#438" class="Bound">r</a><a id="468" class="Symbol">)</a> <a id="470" class="Keyword">where</a>

<a id="477" class="Keyword">open</a> <a id="482" class="Keyword">import</a> <a id="489" href="Level.html" class="Module">Level</a>
<a id="495" class="Keyword">open</a> <a id="500" class="Keyword">import</a> <a id="507" href="Size.html" class="Module">Size</a>
<a id="512" class="Keyword">open</a> <a id="517" class="Keyword">import</a> <a id="524" href="Data.List.Base.html" class="Module">Data.List.Base</a> <a id="539" class="Keyword">using</a> <a id="545" class="Symbol">(</a><a id="546" href="Agda.Builtin.List.html#130" class="Datatype">List</a><a id="550" class="Symbol">;</a> <a id="552" href="Data.List.Base.html#7375" class="InductiveConstructor">[]</a><a id="554" class="Symbol">;</a> <a id="556" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">_∷_</a><a id="559" class="Symbol">;</a> <a id="561" href="Data.List.Base.html#1943" class="Function Operator">_++_</a><a id="565" class="Symbol">)</a>
<a id="567" class="Keyword">import</a> <a id="574" href="Data.List.NonEmpty.html" class="Module">Data.List.NonEmpty</a> <a id="593" class="Symbol">as</a> <a id="596" class="Module">List⁺</a>
<a id="602" class="Keyword">open</a> <a id="607" class="Keyword">import</a> <a id="614" href="Data.Maybe.Base.html" class="Module">Data.Maybe.Base</a> <a id="630" class="Symbol">as</a> <a id="633" class="Module">Maybe</a> <a id="639" class="Keyword">using</a> <a id="645" class="Symbol">(</a><a id="646" href="Agda.Builtin.Maybe.html#118" class="Datatype">Maybe</a><a id="651" class="Symbol">;</a> <a id="653" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a><a id="657" class="Symbol">;</a> <a id="659" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a><a id="666" class="Symbol">;</a> <a id="668" href="Data.Maybe.Base.html#1583" class="Function">maybe′</a><a id="674" class="Symbol">)</a>
<a id="676" class="Keyword">open</a> <a id="681" class="Keyword">import</a> <a id="688" href="Data.Product.html" class="Module">Data.Product</a> <a id="701" class="Symbol">as</a> <a id="704" class="Module">Prod</a> <a id="709" class="Keyword">using</a> <a id="715" class="Symbol">(</a><a id="716" href="Data.Product.Base.html#852" class="Function">∃</a><a id="717" class="Symbol">)</a>
<a id="719" class="Keyword">open</a> <a id="724" class="Keyword">import</a> <a id="731" href="Data.These.Base.html" class="Module">Data.These.Base</a> <a id="747" class="Symbol">as</a> <a id="750" class="Module">These</a> <a id="756" class="Keyword">using</a> <a id="762" class="Symbol">(</a><a id="763" href="Data.These.Base.html#537" class="Datatype">These</a><a id="768" class="Symbol">)</a>
<a id="770" class="Keyword">open</a> <a id="775" class="Keyword">import</a> <a id="782" href="Function.Base.html" class="Module">Function.Base</a> <a id="796" class="Keyword">using</a> <a id="802" class="Symbol">(</a><a id="803" href="Function.Base.html#3646" class="Function Operator">_∘′_</a><a id="807" class="Symbol">;</a> <a id="809" href="Function.Base.html#725" class="Function">const</a><a id="814" class="Symbol">)</a>
<a id="816" class="Keyword">open</a> <a id="821" class="Keyword">import</a> <a id="828" href="Relation.Unary.html" class="Module">Relation.Unary</a> <a id="843" class="Keyword">using</a> <a id="849" class="Symbol">(</a><a id="850" href="Relation.Unary.html#3629" class="Function">IUniversal</a><a id="860" class="Symbol">;</a> <a id="862" href="Relation.Unary.html#4621" class="Function Operator">_⇒_</a><a id="865" class="Symbol">)</a>

<a id="868" class="Keyword">open</a> <a id="873" href="Relation.Binary.Bundles.html#6960" class="Module">StrictTotalOrder</a> <a id="890" href="Data.Trie.html#442" class="Bound">S</a>
  <a id="894" class="Keyword">using</a> <a id="900" class="Symbol">(</a><a id="901" class="Keyword">module</a> <a id="908" href="Relation.Binary.Bundles.html#4488" class="Module">Eq</a><a id="910" class="Symbol">)</a>
  <a id="914" class="Keyword">renaming</a> <a id="923" class="Symbol">(</a><a id="924" href="Relation.Binary.Bundles.html#7047" class="Field">Carrier</a> <a id="932" class="Symbol">to</a> <a id="935" class="Field">Key</a><a id="938" class="Symbol">)</a>

<a id="941" class="Keyword">open</a> <a id="946" class="Keyword">import</a> <a id="953" href="Data.List.Relation.Binary.Equality.Setoid.html" class="Module">Data.List.Relation.Binary.Equality.Setoid</a> <a id="995" href="Relation.Binary.Bundles.html#4501" class="Function">Eq.setoid</a>
<a id="1005" class="Keyword">open</a> <a id="1010" class="Keyword">import</a> <a id="1017" href="Data.Tree.AVL.Value.html" class="Module">Data.Tree.AVL.Value</a> <a id="1037" href="Data.List.Relation.Binary.Equality.Setoid.html#1738" class="Function">≋-setoid</a> <a id="1046" class="Keyword">using</a> <a id="1052" class="Symbol">(</a><a id="1053" href="Data.Tree.AVL.Value.html#659" class="Record">Value</a><a id="1058" class="Symbol">)</a>

<a id="1061" class="Comment">------------------------------------------------------------------------</a>
<a id="1134" class="Comment">-- Definition</a>

<a id="1149" class="Comment">-- Trie is defined in terms of Trie⁺, the type of non-empty trie. This</a>
<a id="1220" class="Comment">-- guarantees that the trie is minimal: each path in the tree leads to</a>
<a id="1291" class="Comment">-- either a value or a number of non-empty sub-tries.</a>

<a id="1346" class="Keyword">open</a> <a id="1351" class="Keyword">import</a> <a id="1358" href="Data.Trie.NonEmpty.html" class="Module">Data.Trie.NonEmpty</a> <a id="1377" href="Data.Trie.html#442" class="Bound">S</a> as <a id="Trie⁺"></a><a id="1382" href="Data.Trie.html#1382" class="Module">Trie⁺</a> <a id="1388" class="Keyword">public</a>
  <a id="1397" class="Keyword">using</a> <a id="1403" class="Symbol">(</a><a id="1404" href="Data.Trie.NonEmpty.html#1790" class="Datatype">Trie⁺</a><a id="1409" class="Symbol">;</a> <a id="1411" href="Data.Trie.NonEmpty.html#1843" class="Function">Tries⁺</a><a id="1417" class="Symbol">;</a> <a id="1419" href="Data.Trie.NonEmpty.html#1623" class="Function">Word</a><a id="1423" class="Symbol">;</a> <a id="1425" href="Data.Trie.NonEmpty.html#1653" class="Function">eat</a><a id="1428" class="Symbol">)</a>

<a id="Trie"></a><a id="1431" href="Data.Trie.html#1431" class="Function">Trie</a> <a id="1436" class="Symbol">:</a> <a id="1438" class="Symbol">∀</a> <a id="1440" class="Symbol">{</a><a id="1441" href="Data.Trie.html#1441" class="Bound">v</a><a id="1442" class="Symbol">}</a> <a id="1444" class="Symbol">(</a><a id="1445" href="Data.Trie.html#1445" class="Bound">V</a> <a id="1447" class="Symbol">:</a> <a id="1449" href="Data.Tree.AVL.Value.html#659" class="Record">Value</a> <a id="1455" href="Data.Trie.html#1441" class="Bound">v</a><a id="1456" class="Symbol">)</a> <a id="1458" class="Symbol">→</a> <a id="1460" href="Agda.Builtin.Size.html#196" class="Postulate">Size</a> <a id="1465" class="Symbol">→</a> <a id="1467" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1471" class="Symbol">(</a><a id="1472" href="Data.Trie.html#1441" class="Bound">v</a> <a id="1474" href="Agda.Primitive.html#804" class="Primitive Operator">⊔</a> <a id="1476" href="Data.Trie.html#434" class="Bound">k</a> <a id="1478" href="Agda.Primitive.html#804" class="Primitive Operator">⊔</a> <a id="1480" href="Data.Trie.html#436" class="Bound">e</a> <a id="1482" href="Agda.Primitive.html#804" class="Primitive Operator">⊔</a> <a id="1484" href="Data.Trie.html#438" class="Bound">r</a><a id="1485" class="Symbol">)</a>
<a id="1487" href="Data.Trie.html#1431" class="Function">Trie</a> <a id="1492" href="Data.Trie.html#1492" class="Bound">V</a> <a id="1494" href="Data.Trie.html#1494" class="Bound">i</a> <a id="1496" class="Symbol">=</a> <a id="1498" href="Agda.Builtin.Maybe.html#118" class="Datatype">Maybe</a> <a id="1504" class="Symbol">(</a><a id="1505" href="Data.Trie.NonEmpty.html#1790" class="Datatype">Trie⁺</a> <a id="1511" href="Data.Trie.html#1492" class="Bound">V</a> <a id="1513" href="Data.Trie.html#1494" class="Bound">i</a><a id="1514" class="Symbol">)</a>

<a id="1517" class="Comment">------------------------------------------------------------------------</a>
<a id="1590" class="Comment">-- Operations</a>

<a id="1605" class="Comment">-- Functions acting on Trie are wrappers for functions acting on Tries.</a>
<a id="1677" class="Comment">-- Sometimes the empty case is handled in a special way (e.g. insertWith</a>
<a id="1750" class="Comment">-- calls singleton when faced with an empty Trie).</a>

<a id="1802" class="Keyword">module</a> <a id="1809" href="Data.Trie.html#1809" class="Module">_</a> <a id="1811" class="Symbol">{</a><a id="1812" href="Data.Trie.html#1812" class="Bound">v</a><a id="1813" class="Symbol">}</a> <a id="1815" class="Symbol">{</a><a id="1816" href="Data.Trie.html#1816" class="Bound">V</a> <a id="1818" class="Symbol">:</a> <a id="1820" href="Data.Tree.AVL.Value.html#659" class="Record">Value</a> <a id="1826" href="Data.Trie.html#1812" class="Bound">v</a><a id="1827" class="Symbol">}</a> <a id="1829" class="Keyword">where</a>

  <a id="1838" class="Keyword">private</a> <a id="1846" href="Data.Trie.html#1846" class="Function">Val</a> <a id="1850" class="Symbol">=</a> <a id="1852" href="Data.Tree.AVL.Value.html#729" class="Field">Value.family</a> <a id="1865" href="Data.Trie.html#1816" class="Bound">V</a>

<a id="1868" class="Comment">------------------------------------------------------------------------</a>
<a id="1941" class="Comment">-- Lookup</a>

  <a id="1954" href="Data.Trie.html#1954" class="Function">lookup</a> <a id="1961" class="Symbol">:</a> <a id="1963" href="Data.Trie.html#1431" class="Function">Trie</a> <a id="1968" href="Data.Trie.html#1816" class="Bound">V</a> <a id="1970" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a> <a id="1972" class="Symbol">→</a> <a id="1974" class="Symbol">∀</a> <a id="1976" href="Data.Trie.html#1976" class="Bound">ks</a> <a id="1979" class="Symbol">→</a> <a id="1981" href="Agda.Builtin.Maybe.html#118" class="Datatype">Maybe</a> <a id="1987" class="Symbol">(</a><a id="1988" href="Data.These.Base.html#537" class="Datatype">These</a> <a id="1994" class="Symbol">(</a><a id="1995" href="Data.Trie.html#1846" class="Function">Val</a> <a id="1999" href="Data.Trie.html#1976" class="Bound">ks</a><a id="2001" class="Symbol">)</a> <a id="2003" class="Symbol">(</a><a id="2004" href="Data.Trie.NonEmpty.html#1843" class="Function">Tries⁺</a> <a id="2011" class="Symbol">(</a><a id="2012" href="Data.Trie.NonEmpty.html#1653" class="Function">eat</a> <a id="2016" href="Data.Trie.html#1816" class="Bound">V</a> <a id="2018" href="Data.Trie.html#1976" class="Bound">ks</a><a id="2020" class="Symbol">)</a> <a id="2022" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a><a id="2023" class="Symbol">))</a>
  <a id="2028" href="Data.Trie.html#1954" class="Function">lookup</a> <a id="2035" href="Data.Trie.html#2035" class="Bound">t</a> <a id="2037" href="Data.Trie.html#2037" class="Bound">ks</a> <a id="2040" class="Symbol">=</a> <a id="2042" href="Data.Trie.html#2035" class="Bound">t</a> <a id="2044" href="Data.Maybe.Base.html#2256" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="2054" class="Symbol">λ</a> <a id="2056" href="Data.Trie.html#2056" class="Bound">ts</a> <a id="2059" class="Symbol">→</a> <a id="2061" href="Data.Trie.NonEmpty.html#2378" class="Function">Trie⁺.lookup</a> <a id="2074" href="Data.Trie.html#2056" class="Bound">ts</a> <a id="2077" href="Data.Trie.html#2037" class="Bound">ks</a>

  <a id="2083" href="Data.Trie.html#2083" class="Function">lookupValue</a> <a id="2095" class="Symbol">:</a> <a id="2097" href="Data.Trie.html#1431" class="Function">Trie</a> <a id="2102" href="Data.Trie.html#1816" class="Bound">V</a> <a id="2104" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a> <a id="2106" class="Symbol">→</a> <a id="2108" class="Symbol">∀</a> <a id="2110" href="Data.Trie.html#2110" class="Bound">ks</a> <a id="2113" class="Symbol">→</a> <a id="2115" href="Agda.Builtin.Maybe.html#118" class="Datatype">Maybe</a> <a id="2121" class="Symbol">(</a><a id="2122" href="Data.Trie.html#1846" class="Function">Val</a> <a id="2126" href="Data.Trie.html#2110" class="Bound">ks</a><a id="2128" class="Symbol">)</a>
  <a id="2132" href="Data.Trie.html#2083" class="Function">lookupValue</a> <a id="2144" href="Data.Trie.html#2144" class="Bound">t</a> <a id="2146" href="Data.Trie.html#2146" class="Bound">ks</a> <a id="2149" class="Symbol">=</a> <a id="2151" href="Data.Trie.html#2144" class="Bound">t</a> <a id="2153" href="Data.Maybe.Base.html#2256" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="2163" class="Symbol">λ</a> <a id="2165" href="Data.Trie.html#2165" class="Bound">ts</a> <a id="2168" class="Symbol">→</a> <a id="2170" href="Data.Trie.NonEmpty.html#2701" class="Function">Trie⁺.lookupValue</a> <a id="2188" href="Data.Trie.html#2165" class="Bound">ts</a> <a id="2191" href="Data.Trie.html#2146" class="Bound">ks</a>

  <a id="2197" href="Data.Trie.html#2197" class="Function">lookupTries⁺</a> <a id="2210" class="Symbol">:</a> <a id="2212" href="Data.Trie.html#1431" class="Function">Trie</a> <a id="2217" href="Data.Trie.html#1816" class="Bound">V</a> <a id="2219" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a> <a id="2221" class="Symbol">→</a> <a id="2223" class="Symbol">∀</a> <a id="2225" href="Data.Trie.html#2225" class="Bound">ks</a> <a id="2228" class="Symbol">→</a> <a id="2230" href="Agda.Builtin.Maybe.html#118" class="Datatype">Maybe</a> <a id="2236" class="Symbol">(</a><a id="2237" href="Data.Trie.NonEmpty.html#1843" class="Function">Tries⁺</a> <a id="2244" class="Symbol">(</a><a id="2245" href="Data.Trie.NonEmpty.html#1653" class="Function">eat</a> <a id="2249" href="Data.Trie.html#1816" class="Bound">V</a> <a id="2251" href="Data.Trie.html#2225" class="Bound">ks</a><a id="2253" class="Symbol">)</a> <a id="2255" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a><a id="2256" class="Symbol">)</a>
  <a id="2260" href="Data.Trie.html#2197" class="Function">lookupTries⁺</a> <a id="2273" href="Data.Trie.html#2273" class="Bound">t</a> <a id="2275" href="Data.Trie.html#2275" class="Bound">ks</a> <a id="2278" class="Symbol">=</a> <a id="2280" href="Data.Trie.html#2273" class="Bound">t</a> <a id="2282" href="Data.Maybe.Base.html#2256" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="2292" class="Symbol">λ</a> <a id="2294" href="Data.Trie.html#2294" class="Bound">ts</a> <a id="2297" class="Symbol">→</a> <a id="2299" href="Data.Trie.NonEmpty.html#2822" class="Function">Trie⁺.lookupTries⁺</a> <a id="2318" href="Data.Trie.html#2294" class="Bound">ts</a> <a id="2321" href="Data.Trie.html#2275" class="Bound">ks</a>

  <a id="2327" href="Data.Trie.html#2327" class="Function">lookupTrie</a> <a id="2338" class="Symbol">:</a> <a id="2340" href="Data.Trie.html#1431" class="Function">Trie</a> <a id="2345" href="Data.Trie.html#1816" class="Bound">V</a> <a id="2347" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a> <a id="2349" class="Symbol">→</a> <a id="2351" class="Symbol">∀</a> <a id="2353" href="Data.Trie.html#2353" class="Bound">k</a> <a id="2355" class="Symbol">→</a> <a id="2357" href="Data.Trie.html#1431" class="Function">Trie</a> <a id="2362" class="Symbol">(</a><a id="2363" href="Data.Trie.NonEmpty.html#1653" class="Function">eat</a> <a id="2367" href="Data.Trie.html#1816" class="Bound">V</a> <a id="2369" class="Symbol">(</a><a id="2370" href="Data.Trie.html#2353" class="Bound">k</a> <a id="2372" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="2374" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="2376" class="Symbol">))</a> <a id="2379" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a>
  <a id="2383" href="Data.Trie.html#2327" class="Function">lookupTrie</a> <a id="2394" href="Data.Trie.html#2394" class="Bound">t</a> <a id="2396" href="Data.Trie.html#2396" class="Bound">k</a> <a id="2398" class="Symbol">=</a> <a id="2400" href="Data.Trie.html#2394" class="Bound">t</a> <a id="2402" href="Data.Maybe.Base.html#2256" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="2412" class="Symbol">λ</a> <a id="2414" href="Data.Trie.html#2414" class="Bound">ts</a> <a id="2417" class="Symbol">→</a> <a id="2419" href="Data.Trie.NonEmpty.html#2946" class="Function">Trie⁺.lookupTrie⁺</a> <a id="2437" href="Data.Trie.html#2414" class="Bound">ts</a> <a id="2440" href="Data.Trie.html#2396" class="Bound">k</a>

<a id="2443" class="Comment">------------------------------------------------------------------------</a>
<a id="2516" class="Comment">-- Construction</a>

  <a id="2535" href="Data.Trie.html#2535" class="Function">empty</a> <a id="2541" class="Symbol">:</a> <a id="2543" href="Data.Trie.html#1431" class="Function">Trie</a> <a id="2548" href="Data.Trie.html#1816" class="Bound">V</a> <a id="2550" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a>
  <a id="2554" href="Data.Trie.html#2535" class="Function">empty</a> <a id="2560" class="Symbol">=</a> <a id="2562" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a>

  <a id="2573" href="Data.Trie.html#2573" class="Function">singleton</a> <a id="2583" class="Symbol">:</a> <a id="2585" class="Symbol">∀</a> <a id="2587" href="Data.Trie.html#2587" class="Bound">ks</a> <a id="2590" class="Symbol">→</a> <a id="2592" href="Data.Trie.html#1846" class="Function">Val</a> <a id="2596" href="Data.Trie.html#2587" class="Bound">ks</a> <a id="2599" class="Symbol">→</a> <a id="2601" href="Data.Trie.html#1431" class="Function">Trie</a> <a id="2606" href="Data.Trie.html#1816" class="Bound">V</a> <a id="2608" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a>
  <a id="2612" href="Data.Trie.html#2573" class="Function">singleton</a> <a id="2622" href="Data.Trie.html#2622" class="Bound">ks</a> <a id="2625" href="Data.Trie.html#2625" class="Bound">v</a> <a id="2627" class="Symbol">=</a> <a id="2629" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="2634" class="Symbol">(</a><a id="2635" href="Data.Trie.NonEmpty.html#3175" class="Function">Trie⁺.singleton</a> <a id="2651" href="Data.Trie.html#2622" class="Bound">ks</a> <a id="2654" href="Data.Trie.html#2625" class="Bound">v</a><a id="2655" class="Symbol">)</a>

  <a id="2660" href="Data.Trie.html#2660" class="Function">insertWith</a> <a id="2671" class="Symbol">:</a> <a id="2673" class="Symbol">∀</a> <a id="2675" href="Data.Trie.html#2675" class="Bound">ks</a> <a id="2678" class="Symbol">→</a> <a id="2680" class="Symbol">(</a><a id="2681" href="Agda.Builtin.Maybe.html#118" class="Datatype">Maybe</a> <a id="2687" class="Symbol">(</a><a id="2688" href="Data.Trie.html#1846" class="Function">Val</a> <a id="2692" href="Data.Trie.html#2675" class="Bound">ks</a><a id="2694" class="Symbol">)</a> <a id="2696" class="Symbol">→</a> <a id="2698" href="Data.Trie.html#1846" class="Function">Val</a> <a id="2702" href="Data.Trie.html#2675" class="Bound">ks</a><a id="2704" class="Symbol">)</a> <a id="2706" class="Symbol">→</a> <a id="2708" href="Data.Trie.html#1431" class="Function">Trie</a> <a id="2713" href="Data.Trie.html#1816" class="Bound">V</a> <a id="2715" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a> <a id="2717" class="Symbol">→</a> <a id="2719" href="Data.Trie.html#1431" class="Function">Trie</a> <a id="2724" href="Data.Trie.html#1816" class="Bound">V</a> <a id="2726" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a>
  <a id="2730" href="Data.Trie.html#2660" class="Function">insertWith</a> <a id="2741" href="Data.Trie.html#2741" class="Bound">ks</a> <a id="2744" href="Data.Trie.html#2744" class="Bound">f</a> <a id="2746" class="Symbol">(</a><a id="2747" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="2752" href="Data.Trie.html#2752" class="Bound">t</a><a id="2753" class="Symbol">)</a> <a id="2755" class="Symbol">=</a> <a id="2757" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="2762" class="Symbol">(</a><a id="2763" href="Data.Trie.NonEmpty.html#3346" class="Function">Trie⁺.insertWith</a> <a id="2780" href="Data.Trie.html#2741" class="Bound">ks</a> <a id="2783" href="Data.Trie.html#2744" class="Bound">f</a> <a id="2785" href="Data.Trie.html#2752" class="Bound">t</a><a id="2786" class="Symbol">)</a>
  <a id="2790" href="Data.Trie.html#2660" class="Function">insertWith</a> <a id="2801" href="Data.Trie.html#2801" class="Bound">ks</a> <a id="2804" href="Data.Trie.html#2804" class="Bound">f</a> <a id="2806" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a>  <a id="2815" class="Symbol">=</a> <a id="2817" href="Data.Trie.html#2573" class="Function">singleton</a> <a id="2827" href="Data.Trie.html#2801" class="Bound">ks</a> <a id="2830" class="Symbol">(</a><a id="2831" href="Data.Trie.html#2804" class="Bound">f</a> <a id="2833" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a><a id="2840" class="Symbol">)</a>

  <a id="2845" href="Data.Trie.html#2845" class="Function">insert</a> <a id="2852" class="Symbol">:</a> <a id="2854" class="Symbol">∀</a> <a id="2856" href="Data.Trie.html#2856" class="Bound">ks</a> <a id="2859" class="Symbol">→</a> <a id="2861" href="Data.Trie.html#1846" class="Function">Val</a> <a id="2865" href="Data.Trie.html#2856" class="Bound">ks</a> <a id="2868" class="Symbol">→</a> <a id="2870" href="Data.Trie.html#1431" class="Function">Trie</a> <a id="2875" href="Data.Trie.html#1816" class="Bound">V</a> <a id="2877" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a> <a id="2879" class="Symbol">→</a> <a id="2881" href="Data.Trie.html#1431" class="Function">Trie</a> <a id="2886" href="Data.Trie.html#1816" class="Bound">V</a> <a id="2888" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a>
  <a id="2892" href="Data.Trie.html#2845" class="Function">insert</a> <a id="2899" href="Data.Trie.html#2899" class="Bound">ks</a> <a id="2902" class="Symbol">=</a> <a id="2904" href="Data.Trie.html#2660" class="Function">insertWith</a> <a id="2915" href="Data.Trie.html#2899" class="Bound">ks</a> <a id="2918" href="Function.Base.html#3646" class="Function Operator">∘′</a> <a id="2921" href="Function.Base.html#725" class="Function">const</a>

  <a id="2930" href="Data.Trie.html#2930" class="Function">fromList</a> <a id="2939" class="Symbol">:</a> <a id="2941" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="2946" class="Symbol">(</a><a id="2947" href="Data.Product.Base.html#852" class="Function">∃</a> <a id="2949" href="Data.Trie.html#1846" class="Function">Val</a><a id="2952" class="Symbol">)</a> <a id="2954" class="Symbol">→</a> <a id="2956" href="Data.Trie.html#1431" class="Function">Trie</a> <a id="2961" href="Data.Trie.html#1816" class="Bound">V</a> <a id="2963" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a>
  <a id="2967" href="Data.Trie.html#2930" class="Function">fromList</a> <a id="2976" class="Symbol">=</a> <a id="2978" href="Data.Maybe.Base.html#2049" class="Function">Maybe.map</a> <a id="2988" href="Data.Trie.NonEmpty.html#4074" class="Function">Trie⁺.fromList⁺</a> <a id="3004" href="Function.Base.html#3646" class="Function Operator">∘′</a> <a id="3007" href="Data.List.NonEmpty.Base.html#1848" class="Function">List⁺.fromList</a>

  <a id="3025" href="Data.Trie.html#3025" class="Function">toList</a> <a id="3032" class="Symbol">:</a> <a id="3034" href="Data.Trie.html#1431" class="Function">Trie</a> <a id="3039" href="Data.Trie.html#1816" class="Bound">V</a> <a id="3041" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a> <a id="3043" class="Symbol">→</a> <a id="3045" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="3050" class="Symbol">(</a><a id="3051" href="Data.Product.Base.html#852" class="Function">∃</a> <a id="3053" href="Data.Trie.html#1846" class="Function">Val</a><a id="3056" class="Symbol">)</a>
  <a id="3060" href="Data.Trie.html#3025" class="Function">toList</a> <a id="3067" class="Symbol">(</a><a id="3068" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="3073" href="Data.Trie.html#3073" class="Bound">t</a><a id="3074" class="Symbol">)</a> <a id="3076" class="Symbol">=</a> <a id="3078" href="Data.List.NonEmpty.Base.html#1796" class="Function">List⁺.toList</a> <a id="3091" class="Symbol">(</a><a id="3092" href="Data.Trie.NonEmpty.html#4176" class="Function">Trie⁺.toList⁺</a> <a id="3106" href="Data.Trie.html#3073" class="Bound">t</a><a id="3107" class="Symbol">)</a>
  <a id="3111" href="Data.Trie.html#3025" class="Function">toList</a> <a id="3118" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a>  <a id="3127" class="Symbol">=</a> <a id="3129" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>

<a id="3133" class="Comment">------------------------------------------------------------------------</a>
<a id="3206" class="Comment">-- Modification</a>

<a id="3223" class="Keyword">module</a> <a id="3230" href="Data.Trie.html#3230" class="Module">_</a> <a id="3232" class="Symbol">{</a><a id="3233" href="Data.Trie.html#3233" class="Bound">v</a> <a id="3235" href="Data.Trie.html#3235" class="Bound">w</a><a id="3236" class="Symbol">}</a> <a id="3238" class="Symbol">{</a><a id="3239" href="Data.Trie.html#3239" class="Bound">V</a> <a id="3241" class="Symbol">:</a> <a id="3243" href="Data.Tree.AVL.Value.html#659" class="Record">Value</a> <a id="3249" href="Data.Trie.html#3233" class="Bound">v</a><a id="3250" class="Symbol">}</a> <a id="3252" class="Symbol">{</a><a id="3253" href="Data.Trie.html#3253" class="Bound">W</a> <a id="3255" class="Symbol">:</a> <a id="3257" href="Data.Tree.AVL.Value.html#659" class="Record">Value</a> <a id="3263" href="Data.Trie.html#3235" class="Bound">w</a><a id="3264" class="Symbol">}</a> <a id="3266" class="Keyword">where</a>

  <a id="3275" class="Keyword">private</a>
    <a id="3287" href="Data.Trie.html#3287" class="Function">Val</a> <a id="3291" class="Symbol">=</a> <a id="3293" href="Data.Tree.AVL.Value.html#729" class="Field">Value.family</a> <a id="3306" href="Data.Trie.html#3239" class="Bound">V</a>
    <a id="3312" href="Data.Trie.html#3312" class="Function">Wal</a> <a id="3316" class="Symbol">=</a> <a id="3318" href="Data.Tree.AVL.Value.html#729" class="Field">Value.family</a> <a id="3331" href="Data.Trie.html#3253" class="Bound">W</a>

  <a id="3336" href="Data.Trie.html#3336" class="Function">map</a> <a id="3340" class="Symbol">:</a> <a id="3342" class="Symbol">∀</a> <a id="3344" class="Symbol">{</a><a id="3345" href="Data.Trie.html#3345" class="Bound">i</a><a id="3346" class="Symbol">}</a> <a id="3348" class="Symbol">→</a> <a id="3350" href="Relation.Unary.html#3629" class="Function">∀[</a> <a id="3353" href="Data.Trie.html#3287" class="Function">Val</a> <a id="3357" href="Relation.Unary.html#4621" class="Function Operator">⇒</a> <a id="3359" href="Data.Trie.html#3312" class="Function">Wal</a> <a id="3363" href="Relation.Unary.html#3629" class="Function">]</a> <a id="3365" class="Symbol">→</a> <a id="3367" href="Data.Trie.html#1431" class="Function">Trie</a> <a id="3372" href="Data.Trie.html#3239" class="Bound">V</a> <a id="3374" href="Data.Trie.html#3345" class="Bound">i</a> <a id="3376" class="Symbol">→</a> <a id="3378" href="Data.Trie.html#1431" class="Function">Trie</a> <a id="3383" href="Data.Trie.html#3253" class="Bound">W</a> <a id="3385" href="Data.Trie.html#3345" class="Bound">i</a>
  <a id="3389" href="Data.Trie.html#3336" class="Function">map</a> <a id="3393" class="Symbol">=</a> <a id="3395" href="Data.Maybe.Base.html#2049" class="Function">Maybe.map</a> <a id="3405" href="Function.Base.html#3646" class="Function Operator">∘′</a> <a id="3408" href="Data.Trie.NonEmpty.html#1906" class="Function">Trie⁺.map</a> <a id="3418" href="Data.Trie.html#3239" class="Bound">V</a> <a id="3420" href="Data.Trie.html#3253" class="Bound">W</a>

<a id="3423" class="Comment">-- Deletion</a>

<a id="3436" class="Keyword">module</a> <a id="3443" href="Data.Trie.html#3443" class="Module">_</a> <a id="3445" class="Symbol">{</a><a id="3446" href="Data.Trie.html#3446" class="Bound">v</a><a id="3447" class="Symbol">}</a> <a id="3449" class="Symbol">{</a><a id="3450" href="Data.Trie.html#3450" class="Bound">V</a> <a id="3452" class="Symbol">:</a> <a id="3454" href="Data.Tree.AVL.Value.html#659" class="Record">Value</a> <a id="3460" href="Data.Trie.html#3446" class="Bound">v</a><a id="3461" class="Symbol">}</a> <a id="3463" class="Keyword">where</a>

  <a id="3472" class="Comment">-- Use a function to decide how to modify the sub-Trie⁺ whose root is</a>
  <a id="3544" class="Comment">-- at the end of path ks.</a>
  <a id="3572" href="Data.Trie.html#3572" class="Function">deleteWith</a> <a id="3583" class="Symbol">:</a> <a id="3585" class="Symbol">∀</a> <a id="3587" class="Symbol">{</a><a id="3588" href="Data.Trie.html#3588" class="Bound">i</a><a id="3589" class="Symbol">}</a> <a id="3591" class="Symbol">(</a><a id="3592" href="Data.Trie.html#3592" class="Bound">ks</a> <a id="3595" class="Symbol">:</a> <a id="3597" href="Data.Trie.NonEmpty.html#1623" class="Function">Word</a><a id="3601" class="Symbol">)</a> <a id="3603" class="Symbol">→</a>
     <a id="3610" class="Symbol">(∀</a> <a id="3613" class="Symbol">{</a><a id="3614" href="Data.Trie.html#3614" class="Bound">i</a><a id="3615" class="Symbol">}</a> <a id="3617" class="Symbol">→</a> <a id="3619" href="Data.Trie.NonEmpty.html#1790" class="Datatype">Trie⁺</a> <a id="3625" class="Symbol">(</a><a id="3626" href="Data.Trie.NonEmpty.html#1653" class="Function">eat</a> <a id="3630" href="Data.Trie.html#3450" class="Bound">V</a> <a id="3632" href="Data.Trie.html#3592" class="Bound">ks</a><a id="3634" class="Symbol">)</a> <a id="3636" href="Data.Trie.html#3614" class="Bound">i</a> <a id="3638" class="Symbol">→</a> <a id="3640" href="Agda.Builtin.Maybe.html#118" class="Datatype">Maybe</a> <a id="3646" class="Symbol">(</a><a id="3647" href="Data.Trie.NonEmpty.html#1790" class="Datatype">Trie⁺</a> <a id="3653" class="Symbol">(</a><a id="3654" href="Data.Trie.NonEmpty.html#1653" class="Function">eat</a> <a id="3658" href="Data.Trie.html#3450" class="Bound">V</a> <a id="3660" href="Data.Trie.html#3592" class="Bound">ks</a><a id="3662" class="Symbol">)</a> <a id="3664" href="Data.Trie.html#3614" class="Bound">i</a><a id="3665" class="Symbol">))</a> <a id="3668" class="Symbol">→</a>
     <a id="3675" href="Data.Trie.html#1431" class="Function">Trie</a> <a id="3680" href="Data.Trie.html#3450" class="Bound">V</a> <a id="3682" href="Data.Trie.html#3588" class="Bound">i</a> <a id="3684" class="Symbol">→</a> <a id="3686" href="Data.Trie.html#1431" class="Function">Trie</a> <a id="3691" href="Data.Trie.html#3450" class="Bound">V</a> <a id="3693" href="Data.Trie.html#3588" class="Bound">i</a>
  <a id="3697" href="Data.Trie.html#3572" class="Function">deleteWith</a> <a id="3708" href="Data.Trie.html#3708" class="Bound">ks</a> <a id="3711" href="Data.Trie.html#3711" class="Bound">f</a> <a id="3713" href="Data.Trie.html#3713" class="Bound">t</a> <a id="3715" class="Symbol">=</a> <a id="3717" href="Data.Trie.html#3713" class="Bound">t</a> <a id="3719" href="Data.Maybe.Base.html#2256" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="3729" href="Data.Trie.NonEmpty.html#4641" class="Function">Trie⁺.deleteWith</a> <a id="3746" href="Data.Trie.html#3708" class="Bound">ks</a> <a id="3749" href="Data.Trie.html#3711" class="Bound">f</a>

  <a id="3754" class="Comment">-- Remove the whole node</a>
  <a id="3781" href="Data.Trie.html#3781" class="Function">deleteTrie⁺</a> <a id="3793" class="Symbol">:</a> <a id="3795" class="Symbol">∀</a> <a id="3797" class="Symbol">{</a><a id="3798" href="Data.Trie.html#3798" class="Bound">i</a><a id="3799" class="Symbol">}</a> <a id="3801" class="Symbol">(</a><a id="3802" href="Data.Trie.html#3802" class="Bound">ks</a> <a id="3805" class="Symbol">:</a> <a id="3807" href="Data.Trie.NonEmpty.html#1623" class="Function">Word</a><a id="3811" class="Symbol">)</a> <a id="3813" class="Symbol">→</a> <a id="3815" href="Data.Trie.html#1431" class="Function">Trie</a> <a id="3820" href="Data.Trie.html#3450" class="Bound">V</a> <a id="3822" href="Data.Trie.html#3798" class="Bound">i</a> <a id="3824" class="Symbol">→</a> <a id="3826" href="Data.Trie.html#1431" class="Function">Trie</a> <a id="3831" href="Data.Trie.html#3450" class="Bound">V</a> <a id="3833" href="Data.Trie.html#3798" class="Bound">i</a>
  <a id="3837" href="Data.Trie.html#3781" class="Function">deleteTrie⁺</a> <a id="3849" href="Data.Trie.html#3849" class="Bound">ks</a> <a id="3852" href="Data.Trie.html#3852" class="Bound">t</a> <a id="3854" class="Symbol">=</a> <a id="3856" href="Data.Trie.html#3852" class="Bound">t</a> <a id="3858" href="Data.Maybe.Base.html#2256" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="3868" href="Data.Trie.NonEmpty.html#5480" class="Function">Trie⁺.deleteTrie⁺</a> <a id="3886" href="Data.Trie.html#3849" class="Bound">ks</a>

  <a id="3892" class="Comment">-- Remove the value and keep the sub-Tries (if any)</a>
  <a id="3946" href="Data.Trie.html#3946" class="Function">deleteValue</a> <a id="3958" class="Symbol">:</a> <a id="3960" class="Symbol">∀</a> <a id="3962" class="Symbol">{</a><a id="3963" href="Data.Trie.html#3963" class="Bound">i</a><a id="3964" class="Symbol">}</a> <a id="3966" class="Symbol">(</a><a id="3967" href="Data.Trie.html#3967" class="Bound">ks</a> <a id="3970" class="Symbol">:</a> <a id="3972" href="Data.Trie.NonEmpty.html#1623" class="Function">Word</a><a id="3976" class="Symbol">)</a> <a id="3978" class="Symbol">→</a> <a id="3980" href="Data.Trie.html#1431" class="Function">Trie</a> <a id="3985" href="Data.Trie.html#3450" class="Bound">V</a> <a id="3987" href="Data.Trie.html#3963" class="Bound">i</a> <a id="3989" class="Symbol">→</a> <a id="3991" href="Data.Trie.html#1431" class="Function">Trie</a> <a id="3996" href="Data.Trie.html#3450" class="Bound">V</a> <a id="3998" href="Data.Trie.html#3963" class="Bound">i</a>
  <a id="4002" href="Data.Trie.html#3946" class="Function">deleteValue</a> <a id="4014" href="Data.Trie.html#4014" class="Bound">ks</a> <a id="4017" href="Data.Trie.html#4017" class="Bound">t</a> <a id="4019" class="Symbol">=</a> <a id="4021" href="Data.Trie.html#4017" class="Bound">t</a> <a id="4023" href="Data.Maybe.Base.html#2256" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="4033" href="Data.Trie.NonEmpty.html#5598" class="Function">Trie⁺.deleteValue</a> <a id="4051" href="Data.Trie.html#4014" class="Bound">ks</a>

  <a id="4057" class="Comment">-- Remove the sub-Tries and keep the value (if any)</a>
  <a id="4111" href="Data.Trie.html#4111" class="Function">deleteTries⁺</a> <a id="4124" class="Symbol">:</a> <a id="4126" class="Symbol">∀</a> <a id="4128" class="Symbol">{</a><a id="4129" href="Data.Trie.html#4129" class="Bound">i</a><a id="4130" class="Symbol">}</a> <a id="4132" class="Symbol">(</a><a id="4133" href="Data.Trie.html#4133" class="Bound">ks</a> <a id="4136" class="Symbol">:</a> <a id="4138" href="Data.Trie.NonEmpty.html#1623" class="Function">Word</a><a id="4142" class="Symbol">)</a> <a id="4144" class="Symbol">→</a> <a id="4146" href="Data.Trie.html#1431" class="Function">Trie</a> <a id="4151" href="Data.Trie.html#3450" class="Bound">V</a> <a id="4153" href="Data.Trie.html#4129" class="Bound">i</a> <a id="4155" class="Symbol">→</a> <a id="4157" href="Data.Trie.html#1431" class="Function">Trie</a> <a id="4162" href="Data.Trie.html#3450" class="Bound">V</a> <a id="4164" href="Data.Trie.html#4129" class="Bound">i</a>
  <a id="4168" href="Data.Trie.html#4111" class="Function">deleteTries⁺</a> <a id="4181" href="Data.Trie.html#4181" class="Bound">ks</a> <a id="4184" href="Data.Trie.html#4184" class="Bound">t</a> <a id="4186" class="Symbol">=</a> <a id="4188" href="Data.Trie.html#4184" class="Bound">t</a> <a id="4190" href="Data.Maybe.Base.html#2256" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="4200" href="Data.Trie.NonEmpty.html#5762" class="Function">Trie⁺.deleteTries⁺</a> <a id="4219" href="Data.Trie.html#4181" class="Bound">ks</a>
</pre></body></html>