<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Data.Trie</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Trie, basic type and operations</a>
<a id="141" class="Comment">------------------------------------------------------------------------</a>

<a id="215" class="Comment">-- See README.Data.Trie.NonDependent for an example of using a trie to</a>
<a id="286" class="Comment">-- build a lexer.</a>

<a id="305" class="Symbol">{-#</a> <a id="309" class="Keyword">OPTIONS</a> <a id="317" class="Pragma">--cubical-compatible</a> <a id="338" class="Pragma">--sized-types</a> <a id="352" class="Symbol">#-}</a>

<a id="357" class="Keyword">open</a> <a id="362" class="Keyword">import</a> <a id="369" href="Relation.Binary.Core.html" class="Module">Relation.Binary.Core</a> <a id="390" class="Keyword">using</a> <a id="396" class="Symbol">(</a><a id="397" href="Relation.Binary.Core.html#896" class="Function">Rel</a><a id="400" class="Symbol">)</a>
<a id="402" class="Keyword">open</a> <a id="407" class="Keyword">import</a> <a id="414" href="Relation.Binary.Bundles.html" class="Module">Relation.Binary.Bundles</a> <a id="438" class="Keyword">using</a> <a id="444" class="Symbol">(</a><a id="445" href="Relation.Binary.Bundles.html#6960" class="Record">StrictTotalOrder</a><a id="461" class="Symbol">)</a>

<a id="464" class="Keyword">module</a> <a id="471" href="Data.Trie.html" class="Module">Data.Trie</a> <a id="481" class="Symbol">{</a><a id="482" href="Data.Trie.html#482" class="Bound">k</a> <a id="484" href="Data.Trie.html#484" class="Bound">e</a> <a id="486" href="Data.Trie.html#486" class="Bound">r</a><a id="487" class="Symbol">}</a> <a id="489" class="Symbol">(</a><a id="490" href="Data.Trie.html#490" class="Bound">S</a> <a id="492" class="Symbol">:</a> <a id="494" href="Relation.Binary.Bundles.html#6960" class="Record">StrictTotalOrder</a> <a id="511" href="Data.Trie.html#482" class="Bound">k</a> <a id="513" href="Data.Trie.html#484" class="Bound">e</a> <a id="515" href="Data.Trie.html#486" class="Bound">r</a><a id="516" class="Symbol">)</a> <a id="518" class="Keyword">where</a>

<a id="525" class="Keyword">open</a> <a id="530" class="Keyword">import</a> <a id="537" href="Level.html" class="Module">Level</a>
<a id="543" class="Keyword">open</a> <a id="548" class="Keyword">import</a> <a id="555" href="Size.html" class="Module">Size</a>
<a id="560" class="Keyword">open</a> <a id="565" class="Keyword">import</a> <a id="572" href="Data.List.Base.html" class="Module">Data.List.Base</a> <a id="587" class="Keyword">using</a> <a id="593" class="Symbol">(</a><a id="594" href="Agda.Builtin.List.html#130" class="Datatype">List</a><a id="598" class="Symbol">;</a> <a id="600" href="Data.List.Base.html#7375" class="InductiveConstructor">[]</a><a id="602" class="Symbol">;</a> <a id="604" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">_∷_</a><a id="607" class="Symbol">;</a> <a id="609" href="Data.List.Base.html#1943" class="Function Operator">_++_</a><a id="613" class="Symbol">)</a>
<a id="615" class="Keyword">import</a> <a id="622" href="Data.List.NonEmpty.html" class="Module">Data.List.NonEmpty</a> <a id="641" class="Symbol">as</a> <a id="644" class="Module">List⁺</a>
<a id="650" class="Keyword">open</a> <a id="655" class="Keyword">import</a> <a id="662" href="Data.Maybe.Base.html" class="Module">Data.Maybe.Base</a> <a id="678" class="Symbol">as</a> <a id="681" class="Module">Maybe</a> <a id="687" class="Keyword">using</a> <a id="693" class="Symbol">(</a><a id="694" href="Agda.Builtin.Maybe.html#118" class="Datatype">Maybe</a><a id="699" class="Symbol">;</a> <a id="701" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a><a id="705" class="Symbol">;</a> <a id="707" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a><a id="714" class="Symbol">;</a> <a id="716" href="Data.Maybe.Base.html#1583" class="Function">maybe′</a><a id="722" class="Symbol">)</a>
<a id="724" class="Keyword">open</a> <a id="729" class="Keyword">import</a> <a id="736" href="Data.Product.html" class="Module">Data.Product</a> <a id="749" class="Symbol">as</a> <a id="752" class="Module">Prod</a> <a id="757" class="Keyword">using</a> <a id="763" class="Symbol">(</a><a id="764" href="Data.Product.Base.html#852" class="Function">∃</a><a id="765" class="Symbol">)</a>
<a id="767" class="Keyword">open</a> <a id="772" class="Keyword">import</a> <a id="779" href="Data.These.Base.html" class="Module">Data.These.Base</a> <a id="795" class="Symbol">as</a> <a id="798" class="Module">These</a> <a id="804" class="Keyword">using</a> <a id="810" class="Symbol">(</a><a id="811" href="Data.These.Base.html#537" class="Datatype">These</a><a id="816" class="Symbol">)</a>
<a id="818" class="Keyword">open</a> <a id="823" class="Keyword">import</a> <a id="830" href="Function.Base.html" class="Module">Function.Base</a> <a id="844" class="Keyword">using</a> <a id="850" class="Symbol">(</a><a id="851" href="Function.Base.html#3646" class="Function Operator">_∘′_</a><a id="855" class="Symbol">;</a> <a id="857" href="Function.Base.html#725" class="Function">const</a><a id="862" class="Symbol">)</a>
<a id="864" class="Keyword">open</a> <a id="869" class="Keyword">import</a> <a id="876" href="Relation.Unary.html" class="Module">Relation.Unary</a> <a id="891" class="Keyword">using</a> <a id="897" class="Symbol">(</a><a id="898" href="Relation.Unary.html#3629" class="Function">IUniversal</a><a id="908" class="Symbol">;</a> <a id="910" href="Relation.Unary.html#4621" class="Function Operator">_⇒_</a><a id="913" class="Symbol">)</a>

<a id="916" class="Keyword">open</a> <a id="921" href="Relation.Binary.Bundles.html#6960" class="Module">StrictTotalOrder</a> <a id="938" href="Data.Trie.html#490" class="Bound">S</a>
  <a id="942" class="Keyword">using</a> <a id="948" class="Symbol">(</a><a id="949" class="Keyword">module</a> <a id="956" href="Relation.Binary.Bundles.html#4488" class="Module">Eq</a><a id="958" class="Symbol">)</a>
  <a id="962" class="Keyword">renaming</a> <a id="971" class="Symbol">(</a><a id="972" href="Relation.Binary.Bundles.html#7047" class="Field">Carrier</a> <a id="980" class="Symbol">to</a> <a id="983" class="Field">Key</a><a id="986" class="Symbol">)</a>

<a id="989" class="Keyword">open</a> <a id="994" class="Keyword">import</a> <a id="1001" href="Data.List.Relation.Binary.Equality.Setoid.html" class="Module">Data.List.Relation.Binary.Equality.Setoid</a> <a id="1043" href="Relation.Binary.Bundles.html#4501" class="Function">Eq.setoid</a>
<a id="1053" class="Keyword">open</a> <a id="1058" class="Keyword">import</a> <a id="1065" href="Data.Tree.AVL.Value.html" class="Module">Data.Tree.AVL.Value</a> <a id="1085" href="Data.List.Relation.Binary.Equality.Setoid.html#1905" class="Function">≋-setoid</a> <a id="1094" class="Keyword">using</a> <a id="1100" class="Symbol">(</a><a id="1101" href="Data.Tree.AVL.Value.html#714" class="Record">Value</a><a id="1106" class="Symbol">)</a>

<a id="1109" class="Comment">------------------------------------------------------------------------</a>
<a id="1182" class="Comment">-- Definition</a>

<a id="1197" class="Comment">-- Trie is defined in terms of Trie⁺, the type of non-empty trie. This</a>
<a id="1268" class="Comment">-- guarantees that the trie is minimal: each path in the tree leads to</a>
<a id="1339" class="Comment">-- either a value or a number of non-empty sub-tries.</a>

<a id="1394" class="Keyword">open</a> <a id="1399" class="Keyword">import</a> <a id="1406" href="Data.Trie.NonEmpty.html" class="Module">Data.Trie.NonEmpty</a> <a id="1425" href="Data.Trie.html#490" class="Bound">S</a> as <a id="Trie⁺"></a><a id="1430" href="Data.Trie.html#1430" class="Module">Trie⁺</a> <a id="1436" class="Keyword">public</a>
  <a id="1445" class="Keyword">using</a> <a id="1451" class="Symbol">(</a><a id="1452" href="Data.Trie.NonEmpty.html#1790" class="Datatype">Trie⁺</a><a id="1457" class="Symbol">;</a> <a id="1459" href="Data.Trie.NonEmpty.html#1843" class="Function">Tries⁺</a><a id="1465" class="Symbol">;</a> <a id="1467" href="Data.Trie.NonEmpty.html#1623" class="Function">Word</a><a id="1471" class="Symbol">;</a> <a id="1473" href="Data.Trie.NonEmpty.html#1653" class="Function">eat</a><a id="1476" class="Symbol">)</a>

<a id="Trie"></a><a id="1479" href="Data.Trie.html#1479" class="Function">Trie</a> <a id="1484" class="Symbol">:</a> <a id="1486" class="Symbol">∀</a> <a id="1488" class="Symbol">{</a><a id="1489" href="Data.Trie.html#1489" class="Bound">v</a><a id="1490" class="Symbol">}</a> <a id="1492" class="Symbol">(</a><a id="1493" href="Data.Trie.html#1493" class="Bound">V</a> <a id="1495" class="Symbol">:</a> <a id="1497" href="Data.Tree.AVL.Value.html#714" class="Record">Value</a> <a id="1503" href="Data.Trie.html#1489" class="Bound">v</a><a id="1504" class="Symbol">)</a> <a id="1506" class="Symbol">→</a> <a id="1508" href="Agda.Builtin.Size.html#196" class="Postulate">Size</a> <a id="1513" class="Symbol">→</a> <a id="1515" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1519" class="Symbol">(</a><a id="1520" href="Data.Trie.html#1489" class="Bound">v</a> <a id="1522" href="Agda.Primitive.html#804" class="Primitive Operator">⊔</a> <a id="1524" href="Data.Trie.html#482" class="Bound">k</a> <a id="1526" href="Agda.Primitive.html#804" class="Primitive Operator">⊔</a> <a id="1528" href="Data.Trie.html#484" class="Bound">e</a> <a id="1530" href="Agda.Primitive.html#804" class="Primitive Operator">⊔</a> <a id="1532" href="Data.Trie.html#486" class="Bound">r</a><a id="1533" class="Symbol">)</a>
<a id="1535" href="Data.Trie.html#1479" class="Function">Trie</a> <a id="1540" href="Data.Trie.html#1540" class="Bound">V</a> <a id="1542" href="Data.Trie.html#1542" class="Bound">i</a> <a id="1544" class="Symbol">=</a> <a id="1546" href="Agda.Builtin.Maybe.html#118" class="Datatype">Maybe</a> <a id="1552" class="Symbol">(</a><a id="1553" href="Data.Trie.NonEmpty.html#1790" class="Datatype">Trie⁺</a> <a id="1559" href="Data.Trie.html#1540" class="Bound">V</a> <a id="1561" href="Data.Trie.html#1542" class="Bound">i</a><a id="1562" class="Symbol">)</a>

<a id="1565" class="Comment">------------------------------------------------------------------------</a>
<a id="1638" class="Comment">-- Operations</a>

<a id="1653" class="Comment">-- Functions acting on Trie are wrappers for functions acting on Tries.</a>
<a id="1725" class="Comment">-- Sometimes the empty case is handled in a special way (e.g. insertWith</a>
<a id="1798" class="Comment">-- calls singleton when faced with an empty Trie).</a>

<a id="1850" class="Keyword">module</a> <a id="1857" href="Data.Trie.html#1857" class="Module">_</a> <a id="1859" class="Symbol">{</a><a id="1860" href="Data.Trie.html#1860" class="Bound">v</a><a id="1861" class="Symbol">}</a> <a id="1863" class="Symbol">{</a><a id="1864" href="Data.Trie.html#1864" class="Bound">V</a> <a id="1866" class="Symbol">:</a> <a id="1868" href="Data.Tree.AVL.Value.html#714" class="Record">Value</a> <a id="1874" href="Data.Trie.html#1860" class="Bound">v</a><a id="1875" class="Symbol">}</a> <a id="1877" class="Keyword">where</a>

  <a id="1886" class="Keyword">private</a> <a id="1894" href="Data.Trie.html#1894" class="Function">Val</a> <a id="1898" class="Symbol">=</a> <a id="1900" href="Data.Tree.AVL.Value.html#784" class="Field">Value.family</a> <a id="1913" href="Data.Trie.html#1864" class="Bound">V</a>

<a id="1916" class="Comment">------------------------------------------------------------------------</a>
<a id="1989" class="Comment">-- Lookup</a>

  <a id="2002" href="Data.Trie.html#2002" class="Function">lookup</a> <a id="2009" class="Symbol">:</a> <a id="2011" href="Data.Trie.html#1479" class="Function">Trie</a> <a id="2016" href="Data.Trie.html#1864" class="Bound">V</a> <a id="2018" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a> <a id="2020" class="Symbol">→</a> <a id="2022" class="Symbol">∀</a> <a id="2024" href="Data.Trie.html#2024" class="Bound">ks</a> <a id="2027" class="Symbol">→</a> <a id="2029" href="Agda.Builtin.Maybe.html#118" class="Datatype">Maybe</a> <a id="2035" class="Symbol">(</a><a id="2036" href="Data.These.Base.html#537" class="Datatype">These</a> <a id="2042" class="Symbol">(</a><a id="2043" href="Data.Trie.html#1894" class="Function">Val</a> <a id="2047" href="Data.Trie.html#2024" class="Bound">ks</a><a id="2049" class="Symbol">)</a> <a id="2051" class="Symbol">(</a><a id="2052" href="Data.Trie.NonEmpty.html#1843" class="Function">Tries⁺</a> <a id="2059" class="Symbol">(</a><a id="2060" href="Data.Trie.NonEmpty.html#1653" class="Function">eat</a> <a id="2064" href="Data.Trie.html#1864" class="Bound">V</a> <a id="2066" href="Data.Trie.html#2024" class="Bound">ks</a><a id="2068" class="Symbol">)</a> <a id="2070" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a><a id="2071" class="Symbol">))</a>
  <a id="2076" href="Data.Trie.html#2002" class="Function">lookup</a> <a id="2083" href="Data.Trie.html#2083" class="Bound">t</a> <a id="2085" href="Data.Trie.html#2085" class="Bound">ks</a> <a id="2088" class="Symbol">=</a> <a id="2090" href="Data.Trie.html#2083" class="Bound">t</a> <a id="2092" href="Data.Maybe.Base.html#2256" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="2102" class="Symbol">λ</a> <a id="2104" href="Data.Trie.html#2104" class="Bound">ts</a> <a id="2107" class="Symbol">→</a> <a id="2109" href="Data.Trie.NonEmpty.html#2378" class="Function">Trie⁺.lookup</a> <a id="2122" href="Data.Trie.html#2104" class="Bound">ts</a> <a id="2125" href="Data.Trie.html#2085" class="Bound">ks</a>

  <a id="2131" href="Data.Trie.html#2131" class="Function">lookupValue</a> <a id="2143" class="Symbol">:</a> <a id="2145" href="Data.Trie.html#1479" class="Function">Trie</a> <a id="2150" href="Data.Trie.html#1864" class="Bound">V</a> <a id="2152" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a> <a id="2154" class="Symbol">→</a> <a id="2156" class="Symbol">∀</a> <a id="2158" href="Data.Trie.html#2158" class="Bound">ks</a> <a id="2161" class="Symbol">→</a> <a id="2163" href="Agda.Builtin.Maybe.html#118" class="Datatype">Maybe</a> <a id="2169" class="Symbol">(</a><a id="2170" href="Data.Trie.html#1894" class="Function">Val</a> <a id="2174" href="Data.Trie.html#2158" class="Bound">ks</a><a id="2176" class="Symbol">)</a>
  <a id="2180" href="Data.Trie.html#2131" class="Function">lookupValue</a> <a id="2192" href="Data.Trie.html#2192" class="Bound">t</a> <a id="2194" href="Data.Trie.html#2194" class="Bound">ks</a> <a id="2197" class="Symbol">=</a> <a id="2199" href="Data.Trie.html#2192" class="Bound">t</a> <a id="2201" href="Data.Maybe.Base.html#2256" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="2211" class="Symbol">λ</a> <a id="2213" href="Data.Trie.html#2213" class="Bound">ts</a> <a id="2216" class="Symbol">→</a> <a id="2218" href="Data.Trie.NonEmpty.html#2701" class="Function">Trie⁺.lookupValue</a> <a id="2236" href="Data.Trie.html#2213" class="Bound">ts</a> <a id="2239" href="Data.Trie.html#2194" class="Bound">ks</a>

  <a id="2245" href="Data.Trie.html#2245" class="Function">lookupTries⁺</a> <a id="2258" class="Symbol">:</a> <a id="2260" href="Data.Trie.html#1479" class="Function">Trie</a> <a id="2265" href="Data.Trie.html#1864" class="Bound">V</a> <a id="2267" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a> <a id="2269" class="Symbol">→</a> <a id="2271" class="Symbol">∀</a> <a id="2273" href="Data.Trie.html#2273" class="Bound">ks</a> <a id="2276" class="Symbol">→</a> <a id="2278" href="Agda.Builtin.Maybe.html#118" class="Datatype">Maybe</a> <a id="2284" class="Symbol">(</a><a id="2285" href="Data.Trie.NonEmpty.html#1843" class="Function">Tries⁺</a> <a id="2292" class="Symbol">(</a><a id="2293" href="Data.Trie.NonEmpty.html#1653" class="Function">eat</a> <a id="2297" href="Data.Trie.html#1864" class="Bound">V</a> <a id="2299" href="Data.Trie.html#2273" class="Bound">ks</a><a id="2301" class="Symbol">)</a> <a id="2303" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a><a id="2304" class="Symbol">)</a>
  <a id="2308" href="Data.Trie.html#2245" class="Function">lookupTries⁺</a> <a id="2321" href="Data.Trie.html#2321" class="Bound">t</a> <a id="2323" href="Data.Trie.html#2323" class="Bound">ks</a> <a id="2326" class="Symbol">=</a> <a id="2328" href="Data.Trie.html#2321" class="Bound">t</a> <a id="2330" href="Data.Maybe.Base.html#2256" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="2340" class="Symbol">λ</a> <a id="2342" href="Data.Trie.html#2342" class="Bound">ts</a> <a id="2345" class="Symbol">→</a> <a id="2347" href="Data.Trie.NonEmpty.html#2822" class="Function">Trie⁺.lookupTries⁺</a> <a id="2366" href="Data.Trie.html#2342" class="Bound">ts</a> <a id="2369" href="Data.Trie.html#2323" class="Bound">ks</a>

  <a id="2375" href="Data.Trie.html#2375" class="Function">lookupTrie</a> <a id="2386" class="Symbol">:</a> <a id="2388" href="Data.Trie.html#1479" class="Function">Trie</a> <a id="2393" href="Data.Trie.html#1864" class="Bound">V</a> <a id="2395" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a> <a id="2397" class="Symbol">→</a> <a id="2399" class="Symbol">∀</a> <a id="2401" href="Data.Trie.html#2401" class="Bound">k</a> <a id="2403" class="Symbol">→</a> <a id="2405" href="Data.Trie.html#1479" class="Function">Trie</a> <a id="2410" class="Symbol">(</a><a id="2411" href="Data.Trie.NonEmpty.html#1653" class="Function">eat</a> <a id="2415" href="Data.Trie.html#1864" class="Bound">V</a> <a id="2417" class="Symbol">(</a><a id="2418" href="Data.Trie.html#2401" class="Bound">k</a> <a id="2420" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="2422" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="2424" class="Symbol">))</a> <a id="2427" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a>
  <a id="2431" href="Data.Trie.html#2375" class="Function">lookupTrie</a> <a id="2442" href="Data.Trie.html#2442" class="Bound">t</a> <a id="2444" href="Data.Trie.html#2444" class="Bound">k</a> <a id="2446" class="Symbol">=</a> <a id="2448" href="Data.Trie.html#2442" class="Bound">t</a> <a id="2450" href="Data.Maybe.Base.html#2256" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="2460" class="Symbol">λ</a> <a id="2462" href="Data.Trie.html#2462" class="Bound">ts</a> <a id="2465" class="Symbol">→</a> <a id="2467" href="Data.Trie.NonEmpty.html#2946" class="Function">Trie⁺.lookupTrie⁺</a> <a id="2485" href="Data.Trie.html#2462" class="Bound">ts</a> <a id="2488" href="Data.Trie.html#2444" class="Bound">k</a>

<a id="2491" class="Comment">------------------------------------------------------------------------</a>
<a id="2564" class="Comment">-- Construction</a>

  <a id="2583" href="Data.Trie.html#2583" class="Function">empty</a> <a id="2589" class="Symbol">:</a> <a id="2591" href="Data.Trie.html#1479" class="Function">Trie</a> <a id="2596" href="Data.Trie.html#1864" class="Bound">V</a> <a id="2598" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a>
  <a id="2602" href="Data.Trie.html#2583" class="Function">empty</a> <a id="2608" class="Symbol">=</a> <a id="2610" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a>

  <a id="2621" href="Data.Trie.html#2621" class="Function">singleton</a> <a id="2631" class="Symbol">:</a> <a id="2633" class="Symbol">∀</a> <a id="2635" href="Data.Trie.html#2635" class="Bound">ks</a> <a id="2638" class="Symbol">→</a> <a id="2640" href="Data.Trie.html#1894" class="Function">Val</a> <a id="2644" href="Data.Trie.html#2635" class="Bound">ks</a> <a id="2647" class="Symbol">→</a> <a id="2649" href="Data.Trie.html#1479" class="Function">Trie</a> <a id="2654" href="Data.Trie.html#1864" class="Bound">V</a> <a id="2656" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a>
  <a id="2660" href="Data.Trie.html#2621" class="Function">singleton</a> <a id="2670" href="Data.Trie.html#2670" class="Bound">ks</a> <a id="2673" href="Data.Trie.html#2673" class="Bound">v</a> <a id="2675" class="Symbol">=</a> <a id="2677" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="2682" class="Symbol">(</a><a id="2683" href="Data.Trie.NonEmpty.html#3175" class="Function">Trie⁺.singleton</a> <a id="2699" href="Data.Trie.html#2670" class="Bound">ks</a> <a id="2702" href="Data.Trie.html#2673" class="Bound">v</a><a id="2703" class="Symbol">)</a>

  <a id="2708" href="Data.Trie.html#2708" class="Function">insertWith</a> <a id="2719" class="Symbol">:</a> <a id="2721" class="Symbol">∀</a> <a id="2723" href="Data.Trie.html#2723" class="Bound">ks</a> <a id="2726" class="Symbol">→</a> <a id="2728" class="Symbol">(</a><a id="2729" href="Agda.Builtin.Maybe.html#118" class="Datatype">Maybe</a> <a id="2735" class="Symbol">(</a><a id="2736" href="Data.Trie.html#1894" class="Function">Val</a> <a id="2740" href="Data.Trie.html#2723" class="Bound">ks</a><a id="2742" class="Symbol">)</a> <a id="2744" class="Symbol">→</a> <a id="2746" href="Data.Trie.html#1894" class="Function">Val</a> <a id="2750" href="Data.Trie.html#2723" class="Bound">ks</a><a id="2752" class="Symbol">)</a> <a id="2754" class="Symbol">→</a> <a id="2756" href="Data.Trie.html#1479" class="Function">Trie</a> <a id="2761" href="Data.Trie.html#1864" class="Bound">V</a> <a id="2763" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a> <a id="2765" class="Symbol">→</a> <a id="2767" href="Data.Trie.html#1479" class="Function">Trie</a> <a id="2772" href="Data.Trie.html#1864" class="Bound">V</a> <a id="2774" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a>
  <a id="2778" href="Data.Trie.html#2708" class="Function">insertWith</a> <a id="2789" href="Data.Trie.html#2789" class="Bound">ks</a> <a id="2792" href="Data.Trie.html#2792" class="Bound">f</a> <a id="2794" class="Symbol">(</a><a id="2795" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="2800" href="Data.Trie.html#2800" class="Bound">t</a><a id="2801" class="Symbol">)</a> <a id="2803" class="Symbol">=</a> <a id="2805" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="2810" class="Symbol">(</a><a id="2811" href="Data.Trie.NonEmpty.html#3346" class="Function">Trie⁺.insertWith</a> <a id="2828" href="Data.Trie.html#2789" class="Bound">ks</a> <a id="2831" href="Data.Trie.html#2792" class="Bound">f</a> <a id="2833" href="Data.Trie.html#2800" class="Bound">t</a><a id="2834" class="Symbol">)</a>
  <a id="2838" href="Data.Trie.html#2708" class="Function">insertWith</a> <a id="2849" href="Data.Trie.html#2849" class="Bound">ks</a> <a id="2852" href="Data.Trie.html#2852" class="Bound">f</a> <a id="2854" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a>  <a id="2863" class="Symbol">=</a> <a id="2865" href="Data.Trie.html#2621" class="Function">singleton</a> <a id="2875" href="Data.Trie.html#2849" class="Bound">ks</a> <a id="2878" class="Symbol">(</a><a id="2879" href="Data.Trie.html#2852" class="Bound">f</a> <a id="2881" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a><a id="2888" class="Symbol">)</a>

  <a id="2893" href="Data.Trie.html#2893" class="Function">insert</a> <a id="2900" class="Symbol">:</a> <a id="2902" class="Symbol">∀</a> <a id="2904" href="Data.Trie.html#2904" class="Bound">ks</a> <a id="2907" class="Symbol">→</a> <a id="2909" href="Data.Trie.html#1894" class="Function">Val</a> <a id="2913" href="Data.Trie.html#2904" class="Bound">ks</a> <a id="2916" class="Symbol">→</a> <a id="2918" href="Data.Trie.html#1479" class="Function">Trie</a> <a id="2923" href="Data.Trie.html#1864" class="Bound">V</a> <a id="2925" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a> <a id="2927" class="Symbol">→</a> <a id="2929" href="Data.Trie.html#1479" class="Function">Trie</a> <a id="2934" href="Data.Trie.html#1864" class="Bound">V</a> <a id="2936" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a>
  <a id="2940" href="Data.Trie.html#2893" class="Function">insert</a> <a id="2947" href="Data.Trie.html#2947" class="Bound">ks</a> <a id="2950" class="Symbol">=</a> <a id="2952" href="Data.Trie.html#2708" class="Function">insertWith</a> <a id="2963" href="Data.Trie.html#2947" class="Bound">ks</a> <a id="2966" href="Function.Base.html#3646" class="Function Operator">∘′</a> <a id="2969" href="Function.Base.html#725" class="Function">const</a>

  <a id="2978" href="Data.Trie.html#2978" class="Function">fromList</a> <a id="2987" class="Symbol">:</a> <a id="2989" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="2994" class="Symbol">(</a><a id="2995" href="Data.Product.Base.html#852" class="Function">∃</a> <a id="2997" href="Data.Trie.html#1894" class="Function">Val</a><a id="3000" class="Symbol">)</a> <a id="3002" class="Symbol">→</a> <a id="3004" href="Data.Trie.html#1479" class="Function">Trie</a> <a id="3009" href="Data.Trie.html#1864" class="Bound">V</a> <a id="3011" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a>
  <a id="3015" href="Data.Trie.html#2978" class="Function">fromList</a> <a id="3024" class="Symbol">=</a> <a id="3026" href="Data.Maybe.Base.html#2049" class="Function">Maybe.map</a> <a id="3036" href="Data.Trie.NonEmpty.html#4074" class="Function">Trie⁺.fromList⁺</a> <a id="3052" href="Function.Base.html#3646" class="Function Operator">∘′</a> <a id="3055" href="Data.List.NonEmpty.Base.html#1848" class="Function">List⁺.fromList</a>

  <a id="3073" href="Data.Trie.html#3073" class="Function">toList</a> <a id="3080" class="Symbol">:</a> <a id="3082" href="Data.Trie.html#1479" class="Function">Trie</a> <a id="3087" href="Data.Trie.html#1864" class="Bound">V</a> <a id="3089" href="Agda.Builtin.Size.html#298" class="Postulate">∞</a> <a id="3091" class="Symbol">→</a> <a id="3093" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="3098" class="Symbol">(</a><a id="3099" href="Data.Product.Base.html#852" class="Function">∃</a> <a id="3101" href="Data.Trie.html#1894" class="Function">Val</a><a id="3104" class="Symbol">)</a>
  <a id="3108" href="Data.Trie.html#3073" class="Function">toList</a> <a id="3115" class="Symbol">(</a><a id="3116" href="Agda.Builtin.Maybe.html#156" class="InductiveConstructor">just</a> <a id="3121" href="Data.Trie.html#3121" class="Bound">t</a><a id="3122" class="Symbol">)</a> <a id="3124" class="Symbol">=</a> <a id="3126" href="Data.List.NonEmpty.Base.html#1796" class="Function">List⁺.toList</a> <a id="3139" class="Symbol">(</a><a id="3140" href="Data.Trie.NonEmpty.html#4176" class="Function">Trie⁺.toList⁺</a> <a id="3154" href="Data.Trie.html#3121" class="Bound">t</a><a id="3155" class="Symbol">)</a>
  <a id="3159" href="Data.Trie.html#3073" class="Function">toList</a> <a id="3166" href="Agda.Builtin.Maybe.html#177" class="InductiveConstructor">nothing</a>  <a id="3175" class="Symbol">=</a> <a id="3177" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a>

<a id="3181" class="Comment">------------------------------------------------------------------------</a>
<a id="3254" class="Comment">-- Modification</a>

<a id="3271" class="Keyword">module</a> <a id="3278" href="Data.Trie.html#3278" class="Module">_</a> <a id="3280" class="Symbol">{</a><a id="3281" href="Data.Trie.html#3281" class="Bound">v</a> <a id="3283" href="Data.Trie.html#3283" class="Bound">w</a><a id="3284" class="Symbol">}</a> <a id="3286" class="Symbol">{</a><a id="3287" href="Data.Trie.html#3287" class="Bound">V</a> <a id="3289" class="Symbol">:</a> <a id="3291" href="Data.Tree.AVL.Value.html#714" class="Record">Value</a> <a id="3297" href="Data.Trie.html#3281" class="Bound">v</a><a id="3298" class="Symbol">}</a> <a id="3300" class="Symbol">{</a><a id="3301" href="Data.Trie.html#3301" class="Bound">W</a> <a id="3303" class="Symbol">:</a> <a id="3305" href="Data.Tree.AVL.Value.html#714" class="Record">Value</a> <a id="3311" href="Data.Trie.html#3283" class="Bound">w</a><a id="3312" class="Symbol">}</a> <a id="3314" class="Keyword">where</a>

  <a id="3323" class="Keyword">private</a>
    <a id="3335" href="Data.Trie.html#3335" class="Function">Val</a> <a id="3339" class="Symbol">=</a> <a id="3341" href="Data.Tree.AVL.Value.html#784" class="Field">Value.family</a> <a id="3354" href="Data.Trie.html#3287" class="Bound">V</a>
    <a id="3360" href="Data.Trie.html#3360" class="Function">Wal</a> <a id="3364" class="Symbol">=</a> <a id="3366" href="Data.Tree.AVL.Value.html#784" class="Field">Value.family</a> <a id="3379" href="Data.Trie.html#3301" class="Bound">W</a>

  <a id="3384" href="Data.Trie.html#3384" class="Function">map</a> <a id="3388" class="Symbol">:</a> <a id="3390" class="Symbol">∀</a> <a id="3392" class="Symbol">{</a><a id="3393" href="Data.Trie.html#3393" class="Bound">i</a><a id="3394" class="Symbol">}</a> <a id="3396" class="Symbol">→</a> <a id="3398" href="Relation.Unary.html#3629" class="Function">∀[</a> <a id="3401" href="Data.Trie.html#3335" class="Function">Val</a> <a id="3405" href="Relation.Unary.html#4621" class="Function Operator">⇒</a> <a id="3407" href="Data.Trie.html#3360" class="Function">Wal</a> <a id="3411" href="Relation.Unary.html#3629" class="Function">]</a> <a id="3413" class="Symbol">→</a> <a id="3415" href="Data.Trie.html#1479" class="Function">Trie</a> <a id="3420" href="Data.Trie.html#3287" class="Bound">V</a> <a id="3422" href="Data.Trie.html#3393" class="Bound">i</a> <a id="3424" class="Symbol">→</a> <a id="3426" href="Data.Trie.html#1479" class="Function">Trie</a> <a id="3431" href="Data.Trie.html#3301" class="Bound">W</a> <a id="3433" href="Data.Trie.html#3393" class="Bound">i</a>
  <a id="3437" href="Data.Trie.html#3384" class="Function">map</a> <a id="3441" class="Symbol">=</a> <a id="3443" href="Data.Maybe.Base.html#2049" class="Function">Maybe.map</a> <a id="3453" href="Function.Base.html#3646" class="Function Operator">∘′</a> <a id="3456" href="Data.Trie.NonEmpty.html#1906" class="Function">Trie⁺.map</a> <a id="3466" href="Data.Trie.html#3287" class="Bound">V</a> <a id="3468" href="Data.Trie.html#3301" class="Bound">W</a>

<a id="3471" class="Comment">-- Deletion</a>

<a id="3484" class="Keyword">module</a> <a id="3491" href="Data.Trie.html#3491" class="Module">_</a> <a id="3493" class="Symbol">{</a><a id="3494" href="Data.Trie.html#3494" class="Bound">v</a><a id="3495" class="Symbol">}</a> <a id="3497" class="Symbol">{</a><a id="3498" href="Data.Trie.html#3498" class="Bound">V</a> <a id="3500" class="Symbol">:</a> <a id="3502" href="Data.Tree.AVL.Value.html#714" class="Record">Value</a> <a id="3508" href="Data.Trie.html#3494" class="Bound">v</a><a id="3509" class="Symbol">}</a> <a id="3511" class="Keyword">where</a>

  <a id="3520" class="Comment">-- Use a function to decide how to modify the sub-Trie⁺ whose root is</a>
  <a id="3592" class="Comment">-- at the end of path ks.</a>
  <a id="3620" href="Data.Trie.html#3620" class="Function">deleteWith</a> <a id="3631" class="Symbol">:</a> <a id="3633" class="Symbol">∀</a> <a id="3635" class="Symbol">{</a><a id="3636" href="Data.Trie.html#3636" class="Bound">i</a><a id="3637" class="Symbol">}</a> <a id="3639" class="Symbol">(</a><a id="3640" href="Data.Trie.html#3640" class="Bound">ks</a> <a id="3643" class="Symbol">:</a> <a id="3645" href="Data.Trie.NonEmpty.html#1623" class="Function">Word</a><a id="3649" class="Symbol">)</a> <a id="3651" class="Symbol">→</a>
     <a id="3658" class="Symbol">(∀</a> <a id="3661" class="Symbol">{</a><a id="3662" href="Data.Trie.html#3662" class="Bound">i</a><a id="3663" class="Symbol">}</a> <a id="3665" class="Symbol">→</a> <a id="3667" href="Data.Trie.NonEmpty.html#1790" class="Datatype">Trie⁺</a> <a id="3673" class="Symbol">(</a><a id="3674" href="Data.Trie.NonEmpty.html#1653" class="Function">eat</a> <a id="3678" href="Data.Trie.html#3498" class="Bound">V</a> <a id="3680" href="Data.Trie.html#3640" class="Bound">ks</a><a id="3682" class="Symbol">)</a> <a id="3684" href="Data.Trie.html#3662" class="Bound">i</a> <a id="3686" class="Symbol">→</a> <a id="3688" href="Agda.Builtin.Maybe.html#118" class="Datatype">Maybe</a> <a id="3694" class="Symbol">(</a><a id="3695" href="Data.Trie.NonEmpty.html#1790" class="Datatype">Trie⁺</a> <a id="3701" class="Symbol">(</a><a id="3702" href="Data.Trie.NonEmpty.html#1653" class="Function">eat</a> <a id="3706" href="Data.Trie.html#3498" class="Bound">V</a> <a id="3708" href="Data.Trie.html#3640" class="Bound">ks</a><a id="3710" class="Symbol">)</a> <a id="3712" href="Data.Trie.html#3662" class="Bound">i</a><a id="3713" class="Symbol">))</a> <a id="3716" class="Symbol">→</a>
     <a id="3723" href="Data.Trie.html#1479" class="Function">Trie</a> <a id="3728" href="Data.Trie.html#3498" class="Bound">V</a> <a id="3730" href="Data.Trie.html#3636" class="Bound">i</a> <a id="3732" class="Symbol">→</a> <a id="3734" href="Data.Trie.html#1479" class="Function">Trie</a> <a id="3739" href="Data.Trie.html#3498" class="Bound">V</a> <a id="3741" href="Data.Trie.html#3636" class="Bound">i</a>
  <a id="3745" href="Data.Trie.html#3620" class="Function">deleteWith</a> <a id="3756" href="Data.Trie.html#3756" class="Bound">ks</a> <a id="3759" href="Data.Trie.html#3759" class="Bound">f</a> <a id="3761" href="Data.Trie.html#3761" class="Bound">t</a> <a id="3763" class="Symbol">=</a> <a id="3765" href="Data.Trie.html#3761" class="Bound">t</a> <a id="3767" href="Data.Maybe.Base.html#2256" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="3777" href="Data.Trie.NonEmpty.html#4641" class="Function">Trie⁺.deleteWith</a> <a id="3794" href="Data.Trie.html#3756" class="Bound">ks</a> <a id="3797" href="Data.Trie.html#3759" class="Bound">f</a>

  <a id="3802" class="Comment">-- Remove the whole node</a>
  <a id="3829" href="Data.Trie.html#3829" class="Function">deleteTrie⁺</a> <a id="3841" class="Symbol">:</a> <a id="3843" class="Symbol">∀</a> <a id="3845" class="Symbol">{</a><a id="3846" href="Data.Trie.html#3846" class="Bound">i</a><a id="3847" class="Symbol">}</a> <a id="3849" class="Symbol">(</a><a id="3850" href="Data.Trie.html#3850" class="Bound">ks</a> <a id="3853" class="Symbol">:</a> <a id="3855" href="Data.Trie.NonEmpty.html#1623" class="Function">Word</a><a id="3859" class="Symbol">)</a> <a id="3861" class="Symbol">→</a> <a id="3863" href="Data.Trie.html#1479" class="Function">Trie</a> <a id="3868" href="Data.Trie.html#3498" class="Bound">V</a> <a id="3870" href="Data.Trie.html#3846" class="Bound">i</a> <a id="3872" class="Symbol">→</a> <a id="3874" href="Data.Trie.html#1479" class="Function">Trie</a> <a id="3879" href="Data.Trie.html#3498" class="Bound">V</a> <a id="3881" href="Data.Trie.html#3846" class="Bound">i</a>
  <a id="3885" href="Data.Trie.html#3829" class="Function">deleteTrie⁺</a> <a id="3897" href="Data.Trie.html#3897" class="Bound">ks</a> <a id="3900" href="Data.Trie.html#3900" class="Bound">t</a> <a id="3902" class="Symbol">=</a> <a id="3904" href="Data.Trie.html#3900" class="Bound">t</a> <a id="3906" href="Data.Maybe.Base.html#2256" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="3916" href="Data.Trie.NonEmpty.html#5480" class="Function">Trie⁺.deleteTrie⁺</a> <a id="3934" href="Data.Trie.html#3897" class="Bound">ks</a>

  <a id="3940" class="Comment">-- Remove the value and keep the sub-Tries (if any)</a>
  <a id="3994" href="Data.Trie.html#3994" class="Function">deleteValue</a> <a id="4006" class="Symbol">:</a> <a id="4008" class="Symbol">∀</a> <a id="4010" class="Symbol">{</a><a id="4011" href="Data.Trie.html#4011" class="Bound">i</a><a id="4012" class="Symbol">}</a> <a id="4014" class="Symbol">(</a><a id="4015" href="Data.Trie.html#4015" class="Bound">ks</a> <a id="4018" class="Symbol">:</a> <a id="4020" href="Data.Trie.NonEmpty.html#1623" class="Function">Word</a><a id="4024" class="Symbol">)</a> <a id="4026" class="Symbol">→</a> <a id="4028" href="Data.Trie.html#1479" class="Function">Trie</a> <a id="4033" href="Data.Trie.html#3498" class="Bound">V</a> <a id="4035" href="Data.Trie.html#4011" class="Bound">i</a> <a id="4037" class="Symbol">→</a> <a id="4039" href="Data.Trie.html#1479" class="Function">Trie</a> <a id="4044" href="Data.Trie.html#3498" class="Bound">V</a> <a id="4046" href="Data.Trie.html#4011" class="Bound">i</a>
  <a id="4050" href="Data.Trie.html#3994" class="Function">deleteValue</a> <a id="4062" href="Data.Trie.html#4062" class="Bound">ks</a> <a id="4065" href="Data.Trie.html#4065" class="Bound">t</a> <a id="4067" class="Symbol">=</a> <a id="4069" href="Data.Trie.html#4065" class="Bound">t</a> <a id="4071" href="Data.Maybe.Base.html#2256" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="4081" href="Data.Trie.NonEmpty.html#5598" class="Function">Trie⁺.deleteValue</a> <a id="4099" href="Data.Trie.html#4062" class="Bound">ks</a>

  <a id="4105" class="Comment">-- Remove the sub-Tries and keep the value (if any)</a>
  <a id="4159" href="Data.Trie.html#4159" class="Function">deleteTries⁺</a> <a id="4172" class="Symbol">:</a> <a id="4174" class="Symbol">∀</a> <a id="4176" class="Symbol">{</a><a id="4177" href="Data.Trie.html#4177" class="Bound">i</a><a id="4178" class="Symbol">}</a> <a id="4180" class="Symbol">(</a><a id="4181" href="Data.Trie.html#4181" class="Bound">ks</a> <a id="4184" class="Symbol">:</a> <a id="4186" href="Data.Trie.NonEmpty.html#1623" class="Function">Word</a><a id="4190" class="Symbol">)</a> <a id="4192" class="Symbol">→</a> <a id="4194" href="Data.Trie.html#1479" class="Function">Trie</a> <a id="4199" href="Data.Trie.html#3498" class="Bound">V</a> <a id="4201" href="Data.Trie.html#4177" class="Bound">i</a> <a id="4203" class="Symbol">→</a> <a id="4205" href="Data.Trie.html#1479" class="Function">Trie</a> <a id="4210" href="Data.Trie.html#3498" class="Bound">V</a> <a id="4212" href="Data.Trie.html#4177" class="Bound">i</a>
  <a id="4216" href="Data.Trie.html#4159" class="Function">deleteTries⁺</a> <a id="4229" href="Data.Trie.html#4229" class="Bound">ks</a> <a id="4232" href="Data.Trie.html#4232" class="Bound">t</a> <a id="4234" class="Symbol">=</a> <a id="4236" href="Data.Trie.html#4232" class="Bound">t</a> <a id="4238" href="Data.Maybe.Base.html#2256" class="Function Operator">Maybe.&gt;&gt;=</a> <a id="4248" href="Data.Trie.NonEmpty.html#5762" class="Function">Trie⁺.deleteTries⁺</a> <a id="4267" href="Data.Trie.html#4229" class="Bound">ks</a>
</pre></body></html>