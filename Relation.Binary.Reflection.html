<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Relation.Binary.Reflection</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- The Agda standard library</a>
<a id="103" class="Comment">--</a>
<a id="106" class="Comment">-- Helpers intended to ease the development of &quot;tactics&quot; which use</a>
<a id="173" class="Comment">-- proof by reflection</a>
<a id="196" class="Comment">------------------------------------------------------------------------</a>

<a id="270" class="Symbol">{-#</a> <a id="274" class="Keyword">OPTIONS</a> <a id="282" class="Pragma">--cubical-compatible</a> <a id="303" class="Pragma">--safe</a> <a id="310" class="Symbol">#-}</a>

<a id="315" class="Keyword">open</a> <a id="320" class="Keyword">import</a> <a id="327" href="Data.Fin.Base.html" class="Module">Data.Fin.Base</a> <a id="341" class="Keyword">using</a> <a id="347" class="Symbol">(</a><a id="348" href="Data.Fin.Base.html#1312" class="Datatype">Fin</a><a id="351" class="Symbol">)</a>
<a id="353" class="Keyword">open</a> <a id="358" class="Keyword">import</a> <a id="365" href="Data.Nat.Base.html" class="Module">Data.Nat.Base</a> <a id="379" class="Keyword">using</a> <a id="385" class="Symbol">(</a><a id="386" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a><a id="387" class="Symbol">)</a>
<a id="389" class="Keyword">open</a> <a id="394" class="Keyword">import</a> <a id="401" href="Data.Vec.Base.html" class="Module">Data.Vec.Base</a> <a id="415" class="Symbol">as</a> <a id="418" class="Module">Vec</a> <a id="422" class="Keyword">using</a> <a id="428" class="Symbol">(</a><a id="429" href="Data.Vec.Base.html#1086" class="Datatype">Vec</a><a id="432" class="Symbol">;</a> <a id="434" href="Data.Vec.Base.html#6615" class="Function">allFin</a><a id="440" class="Symbol">)</a>
<a id="442" class="Keyword">open</a> <a id="447" class="Keyword">import</a> <a id="454" href="Function.Base.html" class="Module">Function.Base</a> <a id="468" class="Keyword">using</a> <a id="474" class="Symbol">(</a><a id="475" href="Function.Base.html#704" class="Function">id</a><a id="477" class="Symbol">;</a> <a id="479" href="Function.Base.html#4339" class="Function Operator">_⟨_⟩_</a><a id="484" class="Symbol">)</a>
<a id="486" class="Keyword">open</a> <a id="491" class="Keyword">import</a> <a id="498" href="Function.Bundles.html" class="Module">Function.Bundles</a> <a id="515" class="Keyword">using</a> <a id="521" class="Symbol">(</a><a id="522" class="Keyword">module</a> <a id="529" href="Function.Bundles.html#4354" class="Module">Equivalence</a><a id="540" class="Symbol">)</a>
<a id="542" class="Keyword">open</a> <a id="547" class="Keyword">import</a> <a id="554" href="Level.html" class="Module">Level</a> <a id="560" class="Keyword">using</a> <a id="566" class="Symbol">(</a><a id="567" href="Agda.Primitive.html#591" class="Postulate">Level</a><a id="572" class="Symbol">)</a>
<a id="574" class="Keyword">open</a> <a id="579" class="Keyword">import</a> <a id="586" href="Relation.Binary.html" class="Module">Relation.Binary</a>
<a id="602" class="Keyword">import</a> <a id="609" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="647" class="Symbol">as</a> <a id="650" class="Module">P</a>

<a id="653" class="Comment">-- Think of the parameters as follows:</a>
<a id="692" class="Comment">--</a>
<a id="695" class="Comment">-- * Expr:    A representation of code.</a>
<a id="735" class="Comment">-- * var:     The Expr type should support a notion of variables.</a>
<a id="801" class="Comment">-- * ⟦_⟧:     Computes the semantics of an expression. Takes an</a>
<a id="865" class="Comment">--            environment mapping variables to something.</a>
<a id="923" class="Comment">-- * ⟦_⇓⟧:    Computes the semantics of the normal form of the</a>
<a id="986" class="Comment">--            expression.</a>
<a id="1012" class="Comment">-- * correct: Normalisation preserves the semantics.</a>
<a id="1065" class="Comment">--</a>
<a id="1068" class="Comment">-- Given these parameters two &quot;tactics&quot; are returned, prove and solve.</a>
<a id="1139" class="Comment">--</a>
<a id="1142" class="Comment">-- For an example of the use of this module, see Algebra.RingSolver.</a>

<a id="1212" class="Keyword">module</a> <a id="1219" href="Relation.Binary.Reflection.html" class="Module">Relation.Binary.Reflection</a>
         <a id="1255" class="Symbol">{</a><a id="1256" href="Relation.Binary.Reflection.html#1256" class="Bound">e</a> <a id="1258" href="Relation.Binary.Reflection.html#1258" class="Bound">a</a> <a id="1260" href="Relation.Binary.Reflection.html#1260" class="Bound">s</a><a id="1261" class="Symbol">}</a>
         <a id="1272" class="Symbol">{</a><a id="1273" href="Relation.Binary.Reflection.html#1273" class="Bound">Expr</a> <a id="1278" class="Symbol">:</a> <a id="1280" href="Agda.Builtin.Nat.html#186" class="Datatype">ℕ</a> <a id="1282" class="Symbol">→</a> <a id="1284" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1288" href="Relation.Binary.Reflection.html#1256" class="Bound">e</a><a id="1289" class="Symbol">}</a> <a id="1291" class="Symbol">{</a><a id="1292" href="Relation.Binary.Reflection.html#1292" class="Bound">A</a> <a id="1294" class="Symbol">:</a> <a id="1296" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="1300" href="Relation.Binary.Reflection.html#1258" class="Bound">a</a><a id="1301" class="Symbol">}</a>
         <a id="1312" class="Symbol">(</a><a id="1313" href="Relation.Binary.Reflection.html#1313" class="Bound">Sem</a> <a id="1317" class="Symbol">:</a> <a id="1319" href="Relation.Binary.Bundles.html#1027" class="Record">Setoid</a> <a id="1326" href="Relation.Binary.Reflection.html#1258" class="Bound">a</a> <a id="1328" href="Relation.Binary.Reflection.html#1260" class="Bound">s</a><a id="1329" class="Symbol">)</a>
         <a id="1340" class="Symbol">(</a><a id="1341" href="Relation.Binary.Reflection.html#1341" class="Bound">var</a> <a id="1345" class="Symbol">:</a> <a id="1347" class="Symbol">∀</a> <a id="1349" class="Symbol">{</a><a id="1350" href="Relation.Binary.Reflection.html#1350" class="Bound">n</a><a id="1351" class="Symbol">}</a> <a id="1353" class="Symbol">→</a> <a id="1355" href="Data.Fin.Base.html#1312" class="Datatype">Fin</a> <a id="1359" href="Relation.Binary.Reflection.html#1350" class="Bound">n</a> <a id="1361" class="Symbol">→</a> <a id="1363" href="Relation.Binary.Reflection.html#1273" class="Bound">Expr</a> <a id="1368" href="Relation.Binary.Reflection.html#1350" class="Bound">n</a><a id="1369" class="Symbol">)</a>
         <a id="1380" class="Symbol">(</a><a id="1381" href="Relation.Binary.Reflection.html#1381" class="Bound Operator">⟦_⟧</a> <a id="1385" href="Relation.Binary.Reflection.html#1385" class="Bound Operator">⟦_⇓⟧</a> <a id="1390" class="Symbol">:</a> <a id="1392" class="Symbol">∀</a> <a id="1394" class="Symbol">{</a><a id="1395" href="Relation.Binary.Reflection.html#1395" class="Bound">n</a><a id="1396" class="Symbol">}</a> <a id="1398" class="Symbol">→</a> <a id="1400" href="Relation.Binary.Reflection.html#1273" class="Bound">Expr</a> <a id="1405" href="Relation.Binary.Reflection.html#1395" class="Bound">n</a> <a id="1407" class="Symbol">→</a> <a id="1409" href="Data.Vec.Base.html#1086" class="Datatype">Vec</a> <a id="1413" href="Relation.Binary.Reflection.html#1292" class="Bound">A</a> <a id="1415" href="Relation.Binary.Reflection.html#1395" class="Bound">n</a> <a id="1417" class="Symbol">→</a> <a id="1419" href="Relation.Binary.Bundles.html#1090" class="Field">Setoid.Carrier</a> <a id="1434" href="Relation.Binary.Reflection.html#1313" class="Bound">Sem</a><a id="1437" class="Symbol">)</a>
         <a id="1448" class="Symbol">(</a><a id="1449" href="Relation.Binary.Reflection.html#1449" class="Bound">correct</a> <a id="1457" class="Symbol">:</a> <a id="1459" class="Symbol">∀</a> <a id="1461" class="Symbol">{</a><a id="1462" href="Relation.Binary.Reflection.html#1462" class="Bound">n</a><a id="1463" class="Symbol">}</a> <a id="1465" class="Symbol">(</a><a id="1466" href="Relation.Binary.Reflection.html#1466" class="Bound">e</a> <a id="1468" class="Symbol">:</a> <a id="1470" href="Relation.Binary.Reflection.html#1273" class="Bound">Expr</a> <a id="1475" href="Relation.Binary.Reflection.html#1462" class="Bound">n</a><a id="1476" class="Symbol">)</a> <a id="1478" href="Relation.Binary.Reflection.html#1478" class="Bound">ρ</a> <a id="1480" class="Symbol">→</a>
                    <a id="1502" href="Relation.Binary.Reflection.html#1385" class="Bound Operator">⟦</a> <a id="1504" href="Relation.Binary.Reflection.html#1466" class="Bound">e</a> <a id="1506" href="Relation.Binary.Reflection.html#1385" class="Bound Operator">⇓⟧</a> <a id="1509" href="Relation.Binary.Reflection.html#1478" class="Bound">ρ</a> <a id="1511" href="Function.Base.html#4339" class="Function Operator">⟨</a> <a id="1513" href="Relation.Binary.Bundles.html#1116" class="Field Operator">Setoid._≈_</a> <a id="1524" href="Relation.Binary.Reflection.html#1313" class="Bound">Sem</a> <a id="1528" href="Function.Base.html#4339" class="Function Operator">⟩</a> <a id="1530" href="Relation.Binary.Reflection.html#1381" class="Bound Operator">⟦</a> <a id="1532" href="Relation.Binary.Reflection.html#1466" class="Bound">e</a> <a id="1534" href="Relation.Binary.Reflection.html#1381" class="Bound Operator">⟧</a> <a id="1536" href="Relation.Binary.Reflection.html#1478" class="Bound">ρ</a><a id="1537" class="Symbol">)</a>
         <a id="1548" class="Keyword">where</a>

<a id="1555" class="Keyword">open</a> <a id="1560" class="Keyword">import</a> <a id="1567" href="Data.Vec.N-ary.html" class="Module">Data.Vec.N-ary</a>
<a id="1582" class="Keyword">open</a> <a id="1587" class="Keyword">import</a> <a id="1594" href="Data.Product.Base.html" class="Module">Data.Product.Base</a> <a id="1612" class="Keyword">using</a> <a id="1618" class="Symbol">(</a><a id="1619" href="Data.Product.Base.html#1618" class="Function Operator">_×_</a><a id="1622" class="Symbol">;</a> <a id="1624" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,_</a><a id="1627" class="Symbol">;</a> <a id="1629" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="1634" class="Symbol">;</a> <a id="1636" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="1641" class="Symbol">)</a>
<a id="1643" class="Keyword">import</a> <a id="1650" href="Relation.Binary.Reasoning.Setoid.html" class="Module">Relation.Binary.Reasoning.Setoid</a> <a id="1683" class="Symbol">as</a> <a id="1686" class="Module">Eq</a>

<a id="1690" class="Keyword">open</a> <a id="1695" href="Relation.Binary.Bundles.html#1027" class="Module">Setoid</a> <a id="1702" href="Relation.Binary.Reflection.html#1313" class="Bound">Sem</a>
<a id="1706" class="Keyword">open</a> <a id="1711" href="Relation.Binary.Reasoning.Setoid.html" class="Module">Eq</a> <a id="1714" href="Relation.Binary.Reflection.html#1313" class="Bound">Sem</a>

<a id="1719" class="Comment">-- If two normalised expressions are semantically equal, then their</a>
<a id="1787" class="Comment">-- non-normalised forms are also equal.</a>

<a id="prove"></a><a id="1828" href="Relation.Binary.Reflection.html#1828" class="Function">prove</a> <a id="1834" class="Symbol">:</a> <a id="1836" class="Symbol">∀</a> <a id="1838" class="Symbol">{</a><a id="1839" href="Relation.Binary.Reflection.html#1839" class="Bound">n</a><a id="1840" class="Symbol">}</a> <a id="1842" class="Symbol">(</a><a id="1843" href="Relation.Binary.Reflection.html#1843" class="Bound">ρ</a> <a id="1845" class="Symbol">:</a> <a id="1847" href="Data.Vec.Base.html#1086" class="Datatype">Vec</a> <a id="1851" href="Relation.Binary.Reflection.html#1292" class="Bound">A</a> <a id="1853" href="Relation.Binary.Reflection.html#1839" class="Bound">n</a><a id="1854" class="Symbol">)</a> <a id="1856" href="Relation.Binary.Reflection.html#1856" class="Bound">e₁</a> <a id="1859" href="Relation.Binary.Reflection.html#1859" class="Bound">e₂</a> <a id="1862" class="Symbol">→</a>
        <a id="1872" href="Relation.Binary.Reflection.html#1385" class="Bound Operator">⟦</a> <a id="1874" href="Relation.Binary.Reflection.html#1856" class="Bound">e₁</a> <a id="1877" href="Relation.Binary.Reflection.html#1385" class="Bound Operator">⇓⟧</a> <a id="1880" href="Relation.Binary.Reflection.html#1843" class="Bound">ρ</a> <a id="1882" href="Relation.Binary.Bundles.html#1116" class="Function Operator">≈</a> <a id="1884" href="Relation.Binary.Reflection.html#1385" class="Bound Operator">⟦</a> <a id="1886" href="Relation.Binary.Reflection.html#1859" class="Bound">e₂</a> <a id="1889" href="Relation.Binary.Reflection.html#1385" class="Bound Operator">⇓⟧</a> <a id="1892" href="Relation.Binary.Reflection.html#1843" class="Bound">ρ</a> <a id="1894" class="Symbol">→</a>
        <a id="1904" href="Relation.Binary.Reflection.html#1381" class="Bound Operator">⟦</a> <a id="1906" href="Relation.Binary.Reflection.html#1856" class="Bound">e₁</a>  <a id="1910" href="Relation.Binary.Reflection.html#1381" class="Bound Operator">⟧</a> <a id="1912" href="Relation.Binary.Reflection.html#1843" class="Bound">ρ</a> <a id="1914" href="Relation.Binary.Bundles.html#1116" class="Function Operator">≈</a> <a id="1916" href="Relation.Binary.Reflection.html#1381" class="Bound Operator">⟦</a> <a id="1918" href="Relation.Binary.Reflection.html#1859" class="Bound">e₂</a>  <a id="1922" href="Relation.Binary.Reflection.html#1381" class="Bound Operator">⟧</a> <a id="1924" href="Relation.Binary.Reflection.html#1843" class="Bound">ρ</a>
<a id="1926" href="Relation.Binary.Reflection.html#1828" class="Function">prove</a> <a id="1932" href="Relation.Binary.Reflection.html#1932" class="Bound">ρ</a> <a id="1934" href="Relation.Binary.Reflection.html#1934" class="Bound">e₁</a> <a id="1937" href="Relation.Binary.Reflection.html#1937" class="Bound">e₂</a> <a id="1940" href="Relation.Binary.Reflection.html#1940" class="Bound">hyp</a> <a id="1944" class="Symbol">=</a> <a id="1946" href="Relation.Binary.Reasoning.Base.Single.html#1925" class="Function Operator">begin</a>
  <a id="1954" href="Relation.Binary.Reflection.html#1381" class="Bound Operator">⟦</a> <a id="1956" href="Relation.Binary.Reflection.html#1934" class="Bound">e₁</a>  <a id="1960" href="Relation.Binary.Reflection.html#1381" class="Bound Operator">⟧</a> <a id="1962" href="Relation.Binary.Reflection.html#1932" class="Bound">ρ</a> <a id="1964" href="Relation.Binary.Reasoning.Setoid.html#1061" class="Function">≈⟨</a> <a id="1967" href="Relation.Binary.Structures.html#1622" class="Function">sym</a> <a id="1971" class="Symbol">(</a><a id="1972" href="Relation.Binary.Reflection.html#1449" class="Bound">correct</a> <a id="1980" href="Relation.Binary.Reflection.html#1934" class="Bound">e₁</a> <a id="1983" href="Relation.Binary.Reflection.html#1932" class="Bound">ρ</a><a id="1984" class="Symbol">)</a> <a id="1986" href="Relation.Binary.Reasoning.Setoid.html#1061" class="Function">⟩</a>
  <a id="1990" href="Relation.Binary.Reflection.html#1385" class="Bound Operator">⟦</a> <a id="1992" href="Relation.Binary.Reflection.html#1934" class="Bound">e₁</a> <a id="1995" href="Relation.Binary.Reflection.html#1385" class="Bound Operator">⇓⟧</a> <a id="1998" href="Relation.Binary.Reflection.html#1932" class="Bound">ρ</a> <a id="2000" href="Relation.Binary.Reasoning.Setoid.html#1061" class="Function">≈⟨</a> <a id="2003" href="Relation.Binary.Reflection.html#1940" class="Bound">hyp</a> <a id="2007" href="Relation.Binary.Reasoning.Setoid.html#1061" class="Function">⟩</a>
  <a id="2011" href="Relation.Binary.Reflection.html#1385" class="Bound Operator">⟦</a> <a id="2013" href="Relation.Binary.Reflection.html#1937" class="Bound">e₂</a> <a id="2016" href="Relation.Binary.Reflection.html#1385" class="Bound Operator">⇓⟧</a> <a id="2019" href="Relation.Binary.Reflection.html#1932" class="Bound">ρ</a> <a id="2021" href="Relation.Binary.Reasoning.Setoid.html#1061" class="Function">≈⟨</a> <a id="2024" href="Relation.Binary.Reflection.html#1449" class="Bound">correct</a> <a id="2032" href="Relation.Binary.Reflection.html#1937" class="Bound">e₂</a> <a id="2035" href="Relation.Binary.Reflection.html#1932" class="Bound">ρ</a> <a id="2037" href="Relation.Binary.Reasoning.Setoid.html#1061" class="Function">⟩</a>
  <a id="2041" href="Relation.Binary.Reflection.html#1381" class="Bound Operator">⟦</a> <a id="2043" href="Relation.Binary.Reflection.html#1937" class="Bound">e₂</a>  <a id="2047" href="Relation.Binary.Reflection.html#1381" class="Bound Operator">⟧</a> <a id="2049" href="Relation.Binary.Reflection.html#1932" class="Bound">ρ</a> <a id="2051" href="Relation.Binary.Reasoning.Base.Single.html#2564" class="Function Operator">∎</a>

<a id="2054" class="Comment">-- Applies the function to all possible &quot;variables&quot;.</a>

<a id="close"></a><a id="2108" href="Relation.Binary.Reflection.html#2108" class="Function">close</a> <a id="2114" class="Symbol">:</a> <a id="2116" class="Symbol">∀</a> <a id="2118" class="Symbol">{</a><a id="2119" href="Relation.Binary.Reflection.html#2119" class="Bound">A</a> <a id="2121" class="Symbol">:</a> <a id="2123" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="2127" href="Relation.Binary.Reflection.html#1256" class="Bound">e</a><a id="2128" class="Symbol">}</a> <a id="2130" href="Relation.Binary.Reflection.html#2130" class="Bound">n</a> <a id="2132" class="Symbol">→</a> <a id="2134" href="Data.Vec.N-ary.html#1164" class="Function">N-ary</a> <a id="2140" href="Relation.Binary.Reflection.html#2130" class="Bound">n</a> <a id="2142" class="Symbol">(</a><a id="2143" href="Relation.Binary.Reflection.html#1273" class="Bound">Expr</a> <a id="2148" href="Relation.Binary.Reflection.html#2130" class="Bound">n</a><a id="2149" class="Symbol">)</a> <a id="2151" href="Relation.Binary.Reflection.html#2119" class="Bound">A</a> <a id="2153" class="Symbol">→</a> <a id="2155" href="Relation.Binary.Reflection.html#2119" class="Bound">A</a>
<a id="2157" href="Relation.Binary.Reflection.html#2108" class="Function">close</a> <a id="2163" href="Relation.Binary.Reflection.html#2163" class="Bound">n</a> <a id="2165" href="Relation.Binary.Reflection.html#2165" class="Bound">f</a> <a id="2167" class="Symbol">=</a> <a id="2169" href="Relation.Binary.Reflection.html#2165" class="Bound">f</a> <a id="2171" href="Data.Vec.N-ary.html#1512" class="Function Operator">$ⁿ</a> <a id="2174" href="Data.Vec.Base.html#2812" class="Function">Vec.map</a> <a id="2182" href="Relation.Binary.Reflection.html#1341" class="Bound">var</a> <a id="2186" class="Symbol">(</a><a id="2187" href="Data.Vec.Base.html#6615" class="Function">allFin</a> <a id="2194" href="Relation.Binary.Reflection.html#2163" class="Bound">n</a><a id="2195" class="Symbol">)</a>

<a id="2198" class="Comment">-- A variant of prove which should in many cases be easier to use,</a>
<a id="2265" class="Comment">-- because variables and environments are handled in a less explicit</a>
<a id="2334" class="Comment">-- way.</a>
<a id="2342" class="Comment">--</a>
<a id="2345" class="Comment">-- If the type signature of solve is a bit daunting, then it may be</a>
<a id="2413" class="Comment">-- helpful to instantiate n with a small natural number and normalise</a>
<a id="2483" class="Comment">-- the remainder of the type.</a>

<a id="solve"></a><a id="2514" href="Relation.Binary.Reflection.html#2514" class="Function">solve</a> <a id="2520" class="Symbol">:</a> <a id="2522" class="Symbol">∀</a> <a id="2524" href="Relation.Binary.Reflection.html#2524" class="Bound">n</a> <a id="2526" class="Symbol">(</a><a id="2527" href="Relation.Binary.Reflection.html#2527" class="Bound">f</a> <a id="2529" class="Symbol">:</a> <a id="2531" href="Data.Vec.N-ary.html#1164" class="Function">N-ary</a> <a id="2537" href="Relation.Binary.Reflection.html#2524" class="Bound">n</a> <a id="2539" class="Symbol">(</a><a id="2540" href="Relation.Binary.Reflection.html#1273" class="Bound">Expr</a> <a id="2545" href="Relation.Binary.Reflection.html#2524" class="Bound">n</a><a id="2546" class="Symbol">)</a> <a id="2548" class="Symbol">(</a><a id="2549" href="Relation.Binary.Reflection.html#1273" class="Bound">Expr</a> <a id="2554" href="Relation.Binary.Reflection.html#2524" class="Bound">n</a> <a id="2556" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2558" href="Relation.Binary.Reflection.html#1273" class="Bound">Expr</a> <a id="2563" href="Relation.Binary.Reflection.html#2524" class="Bound">n</a><a id="2564" class="Symbol">))</a> <a id="2567" class="Symbol">→</a>
  <a id="2571" href="Data.Vec.N-ary.html#2522" class="Function">Eqʰ</a> <a id="2575" href="Relation.Binary.Reflection.html#2524" class="Bound">n</a> <a id="2577" href="Relation.Binary.Bundles.html#1116" class="Function Operator">_≈_</a> <a id="2581" class="Symbol">(</a><a id="2582" href="Data.Vec.N-ary.html#1375" class="Function">curryⁿ</a> <a id="2589" href="Relation.Binary.Reflection.html#1385" class="Bound Operator">⟦</a> <a id="2591" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="2597" class="Symbol">(</a><a id="2598" href="Relation.Binary.Reflection.html#2108" class="Function">close</a> <a id="2604" href="Relation.Binary.Reflection.html#2524" class="Bound">n</a> <a id="2606" href="Relation.Binary.Reflection.html#2527" class="Bound">f</a><a id="2607" class="Symbol">)</a> <a id="2609" href="Relation.Binary.Reflection.html#1385" class="Bound Operator">⇓⟧</a><a id="2611" class="Symbol">)</a> <a id="2613" class="Symbol">(</a><a id="2614" href="Data.Vec.N-ary.html#1375" class="Function">curryⁿ</a> <a id="2621" href="Relation.Binary.Reflection.html#1385" class="Bound Operator">⟦</a> <a id="2623" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="2629" class="Symbol">(</a><a id="2630" href="Relation.Binary.Reflection.html#2108" class="Function">close</a> <a id="2636" href="Relation.Binary.Reflection.html#2524" class="Bound">n</a> <a id="2638" href="Relation.Binary.Reflection.html#2527" class="Bound">f</a><a id="2639" class="Symbol">)</a> <a id="2641" href="Relation.Binary.Reflection.html#1385" class="Bound Operator">⇓⟧</a><a id="2643" class="Symbol">)</a> <a id="2645" class="Symbol">→</a>
  <a id="2649" href="Data.Vec.N-ary.html#2278" class="Function">Eq</a>  <a id="2653" href="Relation.Binary.Reflection.html#2524" class="Bound">n</a> <a id="2655" href="Relation.Binary.Bundles.html#1116" class="Function Operator">_≈_</a> <a id="2659" class="Symbol">(</a><a id="2660" href="Data.Vec.N-ary.html#1375" class="Function">curryⁿ</a> <a id="2667" href="Relation.Binary.Reflection.html#1381" class="Bound Operator">⟦</a> <a id="2669" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="2675" class="Symbol">(</a><a id="2676" href="Relation.Binary.Reflection.html#2108" class="Function">close</a> <a id="2682" href="Relation.Binary.Reflection.html#2524" class="Bound">n</a> <a id="2684" href="Relation.Binary.Reflection.html#2527" class="Bound">f</a><a id="2685" class="Symbol">)</a>  <a id="2688" href="Relation.Binary.Reflection.html#1381" class="Bound Operator">⟧</a><a id="2689" class="Symbol">)</a> <a id="2691" class="Symbol">(</a><a id="2692" href="Data.Vec.N-ary.html#1375" class="Function">curryⁿ</a> <a id="2699" href="Relation.Binary.Reflection.html#1381" class="Bound Operator">⟦</a> <a id="2701" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="2707" class="Symbol">(</a><a id="2708" href="Relation.Binary.Reflection.html#2108" class="Function">close</a> <a id="2714" href="Relation.Binary.Reflection.html#2524" class="Bound">n</a> <a id="2716" href="Relation.Binary.Reflection.html#2527" class="Bound">f</a><a id="2717" class="Symbol">)</a>  <a id="2720" href="Relation.Binary.Reflection.html#1381" class="Bound Operator">⟧</a><a id="2721" class="Symbol">)</a>
<a id="2723" href="Relation.Binary.Reflection.html#2514" class="Function">solve</a> <a id="2729" href="Relation.Binary.Reflection.html#2729" class="Bound">n</a> <a id="2731" href="Relation.Binary.Reflection.html#2731" class="Bound">f</a> <a id="2733" href="Relation.Binary.Reflection.html#2733" class="Bound">hyp</a> <a id="2737" class="Symbol">=</a>
  <a id="2741" href="Data.Vec.N-ary.html#4263" class="Function">curryⁿ-cong</a> <a id="2753" href="Relation.Binary.Bundles.html#1116" class="Function Operator">_≈_</a> <a id="2757" href="Relation.Binary.Reflection.html#1381" class="Bound Operator">⟦</a> <a id="2759" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="2765" class="Symbol">(</a><a id="2766" href="Relation.Binary.Reflection.html#2108" class="Function">close</a> <a id="2772" href="Relation.Binary.Reflection.html#2729" class="Bound">n</a> <a id="2774" href="Relation.Binary.Reflection.html#2731" class="Bound">f</a><a id="2775" class="Symbol">)</a> <a id="2777" href="Relation.Binary.Reflection.html#1381" class="Bound Operator">⟧</a> <a id="2779" href="Relation.Binary.Reflection.html#1381" class="Bound Operator">⟦</a> <a id="2781" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="2787" class="Symbol">(</a><a id="2788" href="Relation.Binary.Reflection.html#2108" class="Function">close</a> <a id="2794" href="Relation.Binary.Reflection.html#2729" class="Bound">n</a> <a id="2796" href="Relation.Binary.Reflection.html#2731" class="Bound">f</a><a id="2797" class="Symbol">)</a> <a id="2799" href="Relation.Binary.Reflection.html#1381" class="Bound Operator">⟧</a>
    <a id="2805" class="Symbol">(λ</a> <a id="2808" href="Relation.Binary.Reflection.html#2808" class="Bound">ρ</a> <a id="2810" class="Symbol">→</a> <a id="2812" href="Relation.Binary.Reflection.html#1828" class="Function">prove</a> <a id="2818" href="Relation.Binary.Reflection.html#2808" class="Bound">ρ</a> <a id="2820" class="Symbol">(</a><a id="2821" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="2827" class="Symbol">(</a><a id="2828" href="Relation.Binary.Reflection.html#2108" class="Function">close</a> <a id="2834" href="Relation.Binary.Reflection.html#2729" class="Bound">n</a> <a id="2836" href="Relation.Binary.Reflection.html#2731" class="Bound">f</a><a id="2837" class="Symbol">))</a> <a id="2840" class="Symbol">(</a><a id="2841" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="2847" class="Symbol">(</a><a id="2848" href="Relation.Binary.Reflection.html#2108" class="Function">close</a> <a id="2854" href="Relation.Binary.Reflection.html#2729" class="Bound">n</a> <a id="2856" href="Relation.Binary.Reflection.html#2731" class="Bound">f</a><a id="2857" class="Symbol">))</a>
             <a id="2873" class="Symbol">(</a><a id="2874" href="Data.Vec.N-ary.html#4557" class="Function">curryⁿ-cong⁻¹</a> <a id="2888" href="Relation.Binary.Bundles.html#1116" class="Function Operator">_≈_</a>
                <a id="2908" href="Relation.Binary.Reflection.html#1385" class="Bound Operator">⟦</a> <a id="2910" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="2916" class="Symbol">(</a><a id="2917" href="Relation.Binary.Reflection.html#2108" class="Function">close</a> <a id="2923" href="Relation.Binary.Reflection.html#2729" class="Bound">n</a> <a id="2925" href="Relation.Binary.Reflection.html#2731" class="Bound">f</a><a id="2926" class="Symbol">)</a> <a id="2928" href="Relation.Binary.Reflection.html#1385" class="Bound Operator">⇓⟧</a> <a id="2931" href="Relation.Binary.Reflection.html#1385" class="Bound Operator">⟦</a> <a id="2933" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="2939" class="Symbol">(</a><a id="2940" href="Relation.Binary.Reflection.html#2108" class="Function">close</a> <a id="2946" href="Relation.Binary.Reflection.html#2729" class="Bound">n</a> <a id="2948" href="Relation.Binary.Reflection.html#2731" class="Bound">f</a><a id="2949" class="Symbol">)</a> <a id="2951" href="Relation.Binary.Reflection.html#1385" class="Bound Operator">⇓⟧</a>
                <a id="2970" class="Symbol">(</a><a id="2971" href="Data.Vec.N-ary.html#5582" class="Function">Eqʰ-to-Eq</a> <a id="2981" href="Relation.Binary.Reflection.html#2729" class="Bound">n</a> <a id="2983" href="Relation.Binary.Bundles.html#1116" class="Function Operator">_≈_</a> <a id="2987" href="Relation.Binary.Reflection.html#2733" class="Bound">hyp</a><a id="2990" class="Symbol">)</a> <a id="2992" href="Relation.Binary.Reflection.html#2808" class="Bound">ρ</a><a id="2993" class="Symbol">))</a>

<a id="2997" class="Comment">-- A variant of solve which does not require that the normal form</a>
<a id="3063" class="Comment">-- equality is proved for an arbitrary environment.</a>

<a id="solve₁"></a><a id="3116" href="Relation.Binary.Reflection.html#3116" class="Function">solve₁</a> <a id="3123" class="Symbol">:</a> <a id="3125" class="Symbol">∀</a> <a id="3127" href="Relation.Binary.Reflection.html#3127" class="Bound">n</a> <a id="3129" class="Symbol">(</a><a id="3130" href="Relation.Binary.Reflection.html#3130" class="Bound">f</a> <a id="3132" class="Symbol">:</a> <a id="3134" href="Data.Vec.N-ary.html#1164" class="Function">N-ary</a> <a id="3140" href="Relation.Binary.Reflection.html#3127" class="Bound">n</a> <a id="3142" class="Symbol">(</a><a id="3143" href="Relation.Binary.Reflection.html#1273" class="Bound">Expr</a> <a id="3148" href="Relation.Binary.Reflection.html#3127" class="Bound">n</a><a id="3149" class="Symbol">)</a> <a id="3151" class="Symbol">(</a><a id="3152" href="Relation.Binary.Reflection.html#1273" class="Bound">Expr</a> <a id="3157" href="Relation.Binary.Reflection.html#3127" class="Bound">n</a> <a id="3159" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3161" href="Relation.Binary.Reflection.html#1273" class="Bound">Expr</a> <a id="3166" href="Relation.Binary.Reflection.html#3127" class="Bound">n</a><a id="3167" class="Symbol">))</a> <a id="3170" class="Symbol">→</a>
         <a id="3181" href="Data.Vec.N-ary.html#1747" class="Function">∀ⁿ</a> <a id="3184" href="Relation.Binary.Reflection.html#3127" class="Bound">n</a> <a id="3186" class="Symbol">(</a><a id="3187" href="Data.Vec.N-ary.html#1375" class="Function">curryⁿ</a> <a id="3194" class="Symbol">λ</a> <a id="3196" href="Relation.Binary.Reflection.html#3196" class="Bound">ρ</a> <a id="3198" class="Symbol">→</a>
                 <a id="3217" href="Relation.Binary.Reflection.html#1385" class="Bound Operator">⟦</a> <a id="3219" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="3225" class="Symbol">(</a><a id="3226" href="Relation.Binary.Reflection.html#2108" class="Function">close</a> <a id="3232" href="Relation.Binary.Reflection.html#3127" class="Bound">n</a> <a id="3234" href="Relation.Binary.Reflection.html#3130" class="Bound">f</a><a id="3235" class="Symbol">)</a> <a id="3237" href="Relation.Binary.Reflection.html#1385" class="Bound Operator">⇓⟧</a> <a id="3240" href="Relation.Binary.Reflection.html#3196" class="Bound">ρ</a> <a id="3242" href="Relation.Binary.Bundles.html#1116" class="Function Operator">≈</a> <a id="3244" href="Relation.Binary.Reflection.html#1385" class="Bound Operator">⟦</a> <a id="3246" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="3252" class="Symbol">(</a><a id="3253" href="Relation.Binary.Reflection.html#2108" class="Function">close</a> <a id="3259" href="Relation.Binary.Reflection.html#3127" class="Bound">n</a> <a id="3261" href="Relation.Binary.Reflection.html#3130" class="Bound">f</a><a id="3262" class="Symbol">)</a> <a id="3264" href="Relation.Binary.Reflection.html#1385" class="Bound Operator">⇓⟧</a> <a id="3267" href="Relation.Binary.Reflection.html#3196" class="Bound">ρ</a> <a id="3269" class="Symbol">→</a>
                 <a id="3288" href="Relation.Binary.Reflection.html#1381" class="Bound Operator">⟦</a> <a id="3290" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="3296" class="Symbol">(</a><a id="3297" href="Relation.Binary.Reflection.html#2108" class="Function">close</a> <a id="3303" href="Relation.Binary.Reflection.html#3127" class="Bound">n</a> <a id="3305" href="Relation.Binary.Reflection.html#3130" class="Bound">f</a><a id="3306" class="Symbol">)</a>  <a id="3309" href="Relation.Binary.Reflection.html#1381" class="Bound Operator">⟧</a> <a id="3311" href="Relation.Binary.Reflection.html#3196" class="Bound">ρ</a> <a id="3313" href="Relation.Binary.Bundles.html#1116" class="Function Operator">≈</a> <a id="3315" href="Relation.Binary.Reflection.html#1381" class="Bound Operator">⟦</a> <a id="3317" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="3323" class="Symbol">(</a><a id="3324" href="Relation.Binary.Reflection.html#2108" class="Function">close</a> <a id="3330" href="Relation.Binary.Reflection.html#3127" class="Bound">n</a> <a id="3332" href="Relation.Binary.Reflection.html#3130" class="Bound">f</a><a id="3333" class="Symbol">)</a>  <a id="3336" href="Relation.Binary.Reflection.html#1381" class="Bound Operator">⟧</a> <a id="3338" href="Relation.Binary.Reflection.html#3196" class="Bound">ρ</a><a id="3339" class="Symbol">)</a>
<a id="3341" href="Relation.Binary.Reflection.html#3116" class="Function">solve₁</a> <a id="3348" href="Relation.Binary.Reflection.html#3348" class="Bound">n</a> <a id="3350" href="Relation.Binary.Reflection.html#3350" class="Bound">f</a> <a id="3352" class="Symbol">=</a>
  <a id="3356" href="Function.Bundles.html#4436" class="Field">Equivalence.from</a> <a id="3373" class="Symbol">(</a><a id="3374" href="Data.Vec.N-ary.html#3245" class="Function">uncurry-∀ⁿ</a> <a id="3385" href="Relation.Binary.Reflection.html#3348" class="Bound">n</a><a id="3386" class="Symbol">)</a> <a id="3388" class="Symbol">λ</a> <a id="3390" href="Relation.Binary.Reflection.html#3390" class="Bound">ρ</a> <a id="3392" class="Symbol">→</a>
    <a id="3398" href="Relation.Binary.PropositionalEquality.Core.html#1808" class="Function">P.subst</a> <a id="3406" href="Function.Base.html#704" class="Function">id</a> <a id="3409" class="Symbol">(</a><a id="3410" href="Relation.Binary.PropositionalEquality.Core.html#1712" class="Function">P.sym</a> <a id="3416" class="Symbol">(</a><a id="3417" href="Data.Vec.N-ary.html#2846" class="Function">left-inverse</a> <a id="3430" class="Symbol">(λ</a> <a id="3433" href="Relation.Binary.Reflection.html#3433" class="Bound">_</a> <a id="3435" class="Symbol">→</a> <a id="3437" class="Symbol">_</a> <a id="3439" href="Relation.Binary.Bundles.html#1116" class="Function Operator">≈</a> <a id="3441" class="Symbol">_</a> <a id="3443" class="Symbol">→</a> <a id="3445" class="Symbol">_</a> <a id="3447" href="Relation.Binary.Bundles.html#1116" class="Function Operator">≈</a> <a id="3449" class="Symbol">_)</a> <a id="3452" href="Relation.Binary.Reflection.html#3390" class="Bound">ρ</a><a id="3453" class="Symbol">))</a>
      <a id="3462" class="Symbol">(</a><a id="3463" href="Relation.Binary.Reflection.html#1828" class="Function">prove</a> <a id="3469" href="Relation.Binary.Reflection.html#3390" class="Bound">ρ</a> <a id="3471" class="Symbol">(</a><a id="3472" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="3478" class="Symbol">(</a><a id="3479" href="Relation.Binary.Reflection.html#2108" class="Function">close</a> <a id="3485" href="Relation.Binary.Reflection.html#3348" class="Bound">n</a> <a id="3487" href="Relation.Binary.Reflection.html#3350" class="Bound">f</a><a id="3488" class="Symbol">))</a> <a id="3491" class="Symbol">(</a><a id="3492" href="Data.Product.Base.html#650" class="Field">proj₂</a> <a id="3498" class="Symbol">(</a><a id="3499" href="Relation.Binary.Reflection.html#2108" class="Function">close</a> <a id="3505" href="Relation.Binary.Reflection.html#3348" class="Bound">n</a> <a id="3507" href="Relation.Binary.Reflection.html#3350" class="Bound">f</a><a id="3508" class="Symbol">)))</a>

<a id="3513" class="Comment">-- A variant of _,_ which is intended to make uses of solve and solve₁</a>
<a id="3584" class="Comment">-- look a bit nicer.</a>

<a id="3606" class="Keyword">infix</a> <a id="3612" class="Number">4</a> <a id="3614" href="Relation.Binary.Reflection.html#3619" class="Function Operator">_⊜_</a>

<a id="_⊜_"></a><a id="3619" href="Relation.Binary.Reflection.html#3619" class="Function Operator">_⊜_</a> <a id="3623" class="Symbol">:</a> <a id="3625" class="Symbol">∀</a> <a id="3627" class="Symbol">{</a><a id="3628" href="Relation.Binary.Reflection.html#3628" class="Bound">n</a><a id="3629" class="Symbol">}</a> <a id="3631" class="Symbol">→</a> <a id="3633" href="Relation.Binary.Reflection.html#1273" class="Bound">Expr</a> <a id="3638" href="Relation.Binary.Reflection.html#3628" class="Bound">n</a> <a id="3640" class="Symbol">→</a> <a id="3642" href="Relation.Binary.Reflection.html#1273" class="Bound">Expr</a> <a id="3647" href="Relation.Binary.Reflection.html#3628" class="Bound">n</a> <a id="3649" class="Symbol">→</a> <a id="3651" href="Relation.Binary.Reflection.html#1273" class="Bound">Expr</a> <a id="3656" href="Relation.Binary.Reflection.html#3628" class="Bound">n</a> <a id="3658" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="3660" href="Relation.Binary.Reflection.html#1273" class="Bound">Expr</a> <a id="3665" href="Relation.Binary.Reflection.html#3628" class="Bound">n</a>
<a id="3667" href="Relation.Binary.Reflection.html#3619" class="Function Operator">_⊜_</a> <a id="3671" class="Symbol">=</a> <a id="3673" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,_</a>
</pre></body></html>